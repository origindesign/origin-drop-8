"use strict";!function(s,n){n.behaviors.ajaxListLoading={},n.behaviors.ajaxListLoading.xhr=null,n.behaviors.ajaxListLoading.ajaxContainer="",n.behaviors.ajaxListLoading.ajaxPath="",n.behaviors.ajaxListLoading.params="",n.behaviors.ajaxListLoading.filterForm=s(".filterform"),n.behaviors.ajaxListLoading.category=s(".filterform .category"),n.behaviors.ajaxListLoading.attach=function(a){var o=n.behaviors.ajaxListLoading;s(".ajax-list-container",a).once("ajaxListLoading").each(function(){o.ajaxContainer=s(this),o.ajaxPath=o.ajaxContainer.attr("data-ajax-path"),o.params=o.ajaxContainer.data("default-params"),""!==window.location.hash&&o.updateParamsFromHash(),o.displayList(o.ajaxContainer,o.ajaxPath,o.params),s(window).off("hashchange.form-fragment").on("hashchange",function(){o.updateParamsFromHash(),o.displayList(o.ajaxContainer,o.ajaxPath,o.params)})}),s(".pager.ajax a").off("click").on("click",function(a){a.preventDefault(),a.stopPropagation();var t=s(this).data("params"),i=o.getTopPosition(s(".ajax-list-container"));0<o.category.length&&(-1===(a=o.category.val()).indexOf("all")&&(t.category="field_category--"+a.replace(".term-",""))),o.xhr.abort(),window.history.pushState({params:JSON.stringify(t)},null,window.location),0<o.filterForm.length&&(i=o.getTopPosition(o.filterForm)),s("html,body").animate({scrollTop:i},"500"),s(".ajax-list-container .wrapper").fadeOut(function(){o.displayList(o.ajaxContainer,o.ajaxPath,t)})})},n.behaviors.ajaxListLoading.updateParamsFromHash=function(){var i=n.behaviors.ajaxListLoading,a=window.location.hash.substring(2).split("/");s.each(a,function(a,t){t=t.split("=");i.params[t[0]]=t[1]})},n.behaviors.ajaxListLoading.updateFilters=function(a){var t,i,o=n.behaviors.ajaxListLoading,r=s(".filterform .from-date"),e=s(".filterform .to-date");0<r.length&&0<e.length&&(t=(i=a.date.replace("field_date_range--","").split(","))[0].split("-"),i=i[1].split("-"),r.val(Date.parse(t[1]+"-"+t[0]+"-"+t[2]).toString("MMM d, yyyy")),e.val(Date.parse(i[1]+"-"+i[0]+"-"+i[2]).toString("MMM d, yyyy"))),0<o.category.length&&(i=void 0,i="all"!==a.category?".term-"+a.category.replace("field_category--",""):"all",o.category.val(i).blur().dropdown("update"))},n.behaviors.ajaxListLoading.displayList=function(i,a,t){var o=n.behaviors.ajaxListLoading;i.html("").removeClass("loaded"),o.updateFilters(t),o.xhr=s.ajax({type:"POST",url:a+"?response_type=ajax",data:t,success:function(a){var t=s("<div/>",{class:"wrapper"});t.html(a),i.html(t),i.addClass("loaded"),n.attachBehaviors()}})},n.behaviors.ajaxListLoading.getTopPosition=function(a){return a.offset().top-100}}(jQuery,Drupal);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFqYXhsb2FkLmpzIl0sIm5hbWVzIjpbIiQiLCJEcnVwYWwiLCJhamF4TG9hZFNjcmlwdCIsImJlaGF2aW9ycyIsImFqYXhMaXN0TG9hZGluZyIsInhociIsImFqYXhQYXRoIiwiYWpheENvbnRhaW5lciIsInBhcmFtcyIsImNhdGVnb3J5IiwiY29udGV4dCIsImF0dGFjaCIsIm9uY2UiLCJlYWNoIiwiYXR0ciIsIl9vYmoiLCJkYXRhIiwid2luZG93IiwibG9jYXRpb24iLCJoYXNoIiwidXBkYXRlUGFyYW1zRnJvbUhhc2giLCJkaXNwbGF5TGlzdCIsIm9mZiIsIm9uIiwiZXZlbnQiLCJwcmV2ZW50RGVmYXVsdCIsInRoaXMiLCJpbmRleE9mIiwibGVuZ3RoIiwidmFsIiwicmVwbGFjZSIsIkpTT04iLCJzdHJpbmdpZnkiLCJmaWx0ZXJGb3JtIiwidG9wIiwiZ2V0VG9wUG9zaXRpb24iLCJhbmltYXRlIiwic2Nyb2xsVG9wIiwiZmFkZU91dCIsImhhc2hBcnJheSIsImZyb21TZWxlY3QiLCJpbmRleCIsInZhbHVlIiwidmFsdWVBcnJheSIsInNwbGl0IiwiZGF0ZSIsInVwZGF0ZUZpbHRlcnMiLCJmcm9tIiwidG9TZWxlY3QiLCJ0byIsIkRhdGUiLCJwYXJzZSIsInRvU3RyaW5nIiwicmVtb3ZlQ2xhc3MiLCIkY29udGFpbmVyIiwiaHRtbCIsImJsdXIiLCJkcm9wZG93biIsIiRwYXRoIiwiJHBhcmFtcyIsImFqYXgiLCJ1cmwiLCJzdWNjZXNzIiwicmVzdWx0Iiwid3JhcHBlciIsImNsYXNzIiwiYWRkQ2xhc3MiLCJhdHRhY2hCZWhhdmlvcnMiLCIkZWxlbSIsIm9mZnNldCIsImpRdWVyeSJdLCJtYXBwaW5ncyI6ImNBQUMsU0FBeUJBLEVBQUdDLEdBQTVCQSxFQUFTQyxVQUFBQSxnQkFBMkIsR0FFakNELEVBQU9FLFVBQVVDLGdCQUFrQkMsSUFBbkMsS0FDQUosRUFBT0UsVUFBVUMsZ0JBQWdCQyxjQUFZLEdBRTdDSixFQUFPRSxVQUFVQyxnQkFBZ0JFLFNBQVcsR0FENUNMLEVBQU9FLFVBQVVDLGdCQUFnQkcsT0FBQUEsR0FDakNOLEVBQU9FLFVBQVVDLGdCQUFnQkUsV0FBakNOLEVBQUEsZUFDQUMsRUFBT0UsVUFBVUMsZ0JBQWdCSSxTQUFqQ1IsRUFBQSx5QkFFQUMsRUFBT0UsVUFBVUMsZ0JBQWdCSyxPQUFXVCxTQUFHVSxHQUV6QyxJQUFDUCxFQUFVQyxFQUFBQSxVQUFnQk8sZ0JBSTNCWCxFQUFBLHVCQUF3QlUsR0FBMUJFLEtBQXdDLG1CQUF4Q0MsS0FBZ0UsV0FHdkRQLEVBQUFBLGNBQWdCQyxFQUFBQSxNQUNoQkMsRUFBTEYsU0FBbUJDLEVBQUFBLGNBQW1CTyxLQUFBLGtCQUF0Q0MsRUFBS1AsT0FBU08sRUFBS1IsY0FBY1MsS0FBSyxrQkFPdEMsS0FBQUMsT0FBQUMsU0FBQUMsTUFISUosRUFBS0ssdUJBSVRMLEVBQUtNLFlBQVlOLEVBQUtSLGNBQWVRLEVBQUtULFNBQVVTLEVBQUtQLFFBR3pEUixFQUFFaUIsUUFBUUssSUFBSSw0QkFBNEJDLEdBQUcsYUFBYyxXQUVsREYsRUFBQUEsdUJBRlROLEVBQUFNLFlBQUFOLEVBQUFSLGNBQUFRLEVBQUFULFNBQUFTLEVBQUFQLFlBU0pSLEVBQUUsaUJBQWlCc0IsSUFBSyxTQUFVQyxHQUFJLFFBQVMsU0FBU0MsR0FFcERBLEVBQU1DLGlCQU1IVixFQUFLTixrQkFIUixJQUFJRCxFQUFTUixFQUFFMEIsTUFBTVYsS0FBSyxVQUtuQlAsRUFBU2tCLEVBQUFBLGVBQVozQixFQUFrQyx5QkFFakMsRUFBQWUsRUFBQU4sU0FBQW1CLFVBRitCLEtBS3BDbkIsRUFBQU0sRUFBQU4sU0FBQW9CLE9BTGdCRixRQUFRLFNBQ2hCbkIsRUFBT0MsU0FBVyxtQkFBbUJBLEVBQVNxQixRQUFRLFNBQVMsTUFRN0N0QixFQUFPdUIsSUFBS0MsUUFHbkNqQixPQUFLa0IsUUFBV0wsVUFBbkIsQ0FBOEJwQixPQUFBdUIsS0FBQUMsVUFBQXhCLElBQUEsS0FBQVMsT0FBQUMsVUFBRixFQUF6QkgsRUFBS2tCLFdBQVdMLFNBQ2ZNLEVBQU1uQixFQUFLb0IsZUFBZXBCLEVBQUtrQixhQUluQ2pDLEVBQUUsYUFBYW9DLFFBSWIsQ0FBQUMsVUFBQUgsR0FBQSxPQUFGbEMsRUFBQSxpQ0FBQXNDLFFBQUEsV0FPWnZCLEVBQUFNLFlBQUFOLEVBQUFSLGNBQUFRLEVBQUFULFNBQUFFLFFBVUlQLEVBQU9FLFVBQVVDLGdCQUFnQmdCLHFCQUF1QixXQVFwRCxJQUFBTCxFQUFBZCxFQUFBRSxVQUFBQyxnQkFZUW1DLEVBcEJadEIsT0FBQUMsU0FBQUMsS0FvQnNCaEIsVUFBVUMsR0FBQUEsTUFGa0MsS0FLMURvQyxFQUFBQSxLQUFBQSxFQUFnQixTQUFBQyxFQUFBQyxHQWJaQyxFQUFhRCxFQUFNRSxNQUFNLEtBaUJ6QkMsRUFBT3JDLE9BQU9xQyxFQUFLZixJQUFRYSxFQUFBLE1BT2xDMUMsRUFHREUsVUFBQUMsZ0JBQUEwQyxjQUFBLFNBQUF0QyxHQWpCQSxJQTJCSXVDLEVBa0JRdEMsRUE3Q1JNLEVBQU9kLEVBQU9FLFVBQVVDLGdCQUd4Qm9DLEVBQWF4QyxFQUFHLDBCQWtCYlEsRUFBT0MsRUFBUCx3QkFFRSxFQUZMK0IsRUFFS1osUUFBQSxFQUFBb0IsRUFBQXBCLFNBSUxtQixHQUhZRixFQUFHckMsRUFBWHFDLEtBQUFmLFFBQUEscUJBQUEsSUFBQWMsTUFBQSxNQUdKLEdBQUFBLE1BQUEsS0FsQklLLEVBQUtKLEVBQUssR0FBR0QsTUFBTSxLQW9CMUJKLEVBQUFYLElBQUFxQixLQUFBQyxNQUFBSixFQUFBLEdBQUEsSUFBQUEsRUFBQSxHQUFBLElBQUFBLEVBQUEsSUFBQUssU0FBQSxnQkEvQkxKLEVBQUFuQixJQUFBcUIsS0FBQUMsTUFBQUYsRUFBQSxHQUFBLElBQUFBLEVBQUEsR0FBQSxJQUFBQSxFQUFBLElBQUFHLFNBQUEsaUJBMEN3QkMsRUFBcEJDLEVBQVdDLFNBQVNGLFNBckJaNUMsT0FBUSxFQTBCSkEsRUF4QmUsUUFBcEJELEVBQU9DLFNBd0JJLFNBQUFELEVBQUFDLFNBQUFxQixRQUFBLG1CQUFBLElBRUgsTUFJc0JmLEVBQUFOLFNBQVNvQixJQUFBcEIsR0FBQStDLE9BQUFDLFNBQUEsWUFPdER4RCxFQUFBRSxVQUFBQyxnQkFBQWlCLFlBQUEsU0FBQWlDLEVBQUFJLEVBQUFDLEdBRUEsSUFBQTVDLEVBQUFkLEVBQUFFLFVBQUFDLGdCQWZRa0QsRUFBQUMsS0FBQSxJQUFBRixZQUFBLFVBMEJFdEMsRUFBQ1osY0FBVUMsR0FBakJXLEVBQUFWLElBQUFMLEVBQUE0RCxLQUFBLENBT00zRCxLQXhMVixPQXlKWTRELElBQUtILEVBQU0sc0JBQ1gxQyxLQUFNMkMsRUFDTkcsUUFBUyxTQUFTQyxHQUVkLElBQUlDLEVBQVVoRSxFQUFHLFNBQVUsQ0FBRWlFLE1BQVMsWUFDdENELEVBQVFULEtBQUtRLEdBQ2JULEVBQVdDLEtBQUtTLEdBQ2hCVixFQUFXWSxTQUFTLFVBQ3BCakUsRUFBT2tFLHNCQWdCbkJsRSxFQUFPRSxVQUFVQyxnQkFBZ0IrQixlQUFpQixTQUFTaUMsR0FFdkQsT0FBT0EsRUFBTUMsU0FBU25DLElBQU0sS0FuTG5DLENBd0xDb0MsT0FBUXJFIiwiZmlsZSI6ImFqYXhsb2FkLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGFqYXhMb2FkU2NyaXB0ICgkLCBEcnVwYWwpIHtcclxuXHJcbiAgICBEcnVwYWwuYmVoYXZpb3JzLmFqYXhMaXN0TG9hZGluZyA9IHt9O1xyXG4gICAgRHJ1cGFsLmJlaGF2aW9ycy5hamF4TGlzdExvYWRpbmcueGhyID0gbnVsbDsgLy8gYWpheCBjYWxsXHJcbiAgICBEcnVwYWwuYmVoYXZpb3JzLmFqYXhMaXN0TG9hZGluZy5hamF4Q29udGFpbmVyID0gJyc7XHJcbiAgICBEcnVwYWwuYmVoYXZpb3JzLmFqYXhMaXN0TG9hZGluZy5hamF4UGF0aCA9ICcnO1xyXG4gICAgRHJ1cGFsLmJlaGF2aW9ycy5hamF4TGlzdExvYWRpbmcucGFyYW1zID0gJyc7XHJcbiAgICBEcnVwYWwuYmVoYXZpb3JzLmFqYXhMaXN0TG9hZGluZy5maWx0ZXJGb3JtID0gJCgnLmZpbHRlcmZvcm0nKTtcclxuICAgIERydXBhbC5iZWhhdmlvcnMuYWpheExpc3RMb2FkaW5nLmNhdGVnb3J5ID0gJCggXCIuZmlsdGVyZm9ybSAuY2F0ZWdvcnlcIiApO1xyXG5cclxuICAgIERydXBhbC5iZWhhdmlvcnMuYWpheExpc3RMb2FkaW5nLmF0dGFjaCA9IGZ1bmN0aW9uIChjb250ZXh0KSB7XHJcblxyXG4gICAgICAgIGxldCBfb2JqID0gRHJ1cGFsLmJlaGF2aW9ycy5hamF4TGlzdExvYWRpbmc7XHJcblxyXG4gICAgICAgICQoJy5hamF4LWxpc3QtY29udGFpbmVyJywgY29udGV4dCkub25jZSgnYWpheExpc3RMb2FkaW5nJykuZWFjaChmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgICAgICBfb2JqLmFqYXhDb250YWluZXIgPSAkKHRoaXMpO1xyXG4gICAgICAgICAgICBfb2JqLmFqYXhQYXRoID0gX29iai5hamF4Q29udGFpbmVyLmF0dHIoJ2RhdGEtYWpheC1wYXRoJyk7XHJcbiAgICAgICAgICAgIF9vYmoucGFyYW1zID0gX29iai5hamF4Q29udGFpbmVyLmRhdGEoJ2RlZmF1bHQtcGFyYW1zJyk7XHJcblxyXG4gICAgICAgICAgICAvLyBJZiBoYXNoIGhhcyBiZWVuIHByb3ZpZGVkLCB1cGRhdGUgcGFyYW1zXHJcbiAgICAgICAgICAgIGlmKHdpbmRvdy5sb2NhdGlvbi5oYXNoICE9PSAnJyl7XHJcbiAgICAgICAgICAgICAgICBfb2JqLnVwZGF0ZVBhcmFtc0Zyb21IYXNoKCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIERpc3BsYXkgbGlzdFxyXG4gICAgICAgICAgICBfb2JqLmRpc3BsYXlMaXN0KF9vYmouYWpheENvbnRhaW5lciwgX29iai5hamF4UGF0aCwgX29iai5wYXJhbXMpO1xyXG5cclxuICAgICAgICAgICAgLy8gT24gaGFzaCBjaGFuZ2UsIHVwZGF0ZSBwYXJhbXMsIHJlbG9hZCBsaXN0XHJcbiAgICAgICAgICAgICQod2luZG93KS5vZmYoJ2hhc2hjaGFuZ2UuZm9ybS1mcmFnbWVudCcpLm9uKCdoYXNoY2hhbmdlJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICBfb2JqLnVwZGF0ZVBhcmFtc0Zyb21IYXNoKCk7XHJcbiAgICAgICAgICAgICAgICBfb2JqLmRpc3BsYXlMaXN0KF9vYmouYWpheENvbnRhaW5lciwgX29iai5hamF4UGF0aCwgX29iai5wYXJhbXMpO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcblxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBBamF4IHBhZ2VyIGxpbmtzXHJcbiAgICAgICAgJCgnLnBhZ2VyLmFqYXggYScpLm9mZiggXCJjbGlja1wiICkub24oICdjbGljaycsIGZ1bmN0aW9uKGV2ZW50KXtcclxuXHJcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG5cclxuICAgICAgICAgICAgbGV0IHBhcmFtcyA9ICQodGhpcykuZGF0YSgncGFyYW1zJyk7XHJcbiAgICAgICAgICAgIGxldCB0b3AgPSBfb2JqLmdldFRvcFBvc2l0aW9uKCQoJy5hamF4LWxpc3QtY29udGFpbmVyJykpO1xyXG5cclxuICAgICAgICAgICAgaWYoX29iai5jYXRlZ29yeS5sZW5ndGggPiAwKXtcclxuICAgICAgICAgICAgICAgIGxldCBjYXRlZ29yeSA9IF9vYmouY2F0ZWdvcnkudmFsKCk7XHJcbiAgICAgICAgICAgICAgICBpZihjYXRlZ29yeS5pbmRleE9mKCdhbGwnKSA9PT0gLTEpe1xyXG4gICAgICAgICAgICAgICAgICAgIHBhcmFtcy5jYXRlZ29yeSA9ICdmaWVsZF9jYXRlZ29yeS0tJytjYXRlZ29yeS5yZXBsYWNlKCcudGVybS0nLCcnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gQWJvcnQgYW55IHBvc3NpYmxlIGN1cnJlbnQgYWpheCBjYWxsXHJcbiAgICAgICAgICAgIF9vYmoueGhyLmFib3J0KCk7XHJcblxyXG4gICAgICAgICAgICAvLyBTZXQgaGlzdG9yeSBzdGF0ZVxyXG4gICAgICAgICAgICB3aW5kb3cuaGlzdG9yeS5wdXNoU3RhdGUoe3BhcmFtczpKU09OLnN0cmluZ2lmeShwYXJhbXMpfSxudWxsLHdpbmRvdy5sb2NhdGlvbik7XHJcblxyXG4gICAgICAgICAgICAvLyBHZXQgdG9wIG9mIGZpbHRlcnMgaWYgcHJlc2VudFxyXG4gICAgICAgICAgICBpZihfb2JqLmZpbHRlckZvcm0ubGVuZ3RoID4gMCl7XHJcbiAgICAgICAgICAgICAgICB0b3AgPSBfb2JqLmdldFRvcFBvc2l0aW9uKF9vYmouZmlsdGVyRm9ybSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIEFuaW1hdGUgdG8gcG9zaXRpb25cclxuICAgICAgICAgICAgJChcImh0bWwsYm9keVwiKS5hbmltYXRlKFxyXG4gICAgICAgICAgICAgICAge3Njcm9sbFRvcDogdG9wfSwgJzUwMCcpO1xyXG5cclxuICAgICAgICAgICAgLy8gRmFkZSBvdXQgd3JhcHBlclxyXG4gICAgICAgICAgICAkKCcuYWpheC1saXN0LWNvbnRhaW5lciAud3JhcHBlcicpLmZhZGVPdXQoIGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICAvLyBUcmlnZ2VyIHRoZSBkaXNwbGF5IG9mIHRoZSBsaXN0XHJcbiAgICAgICAgICAgICAgICBfb2JqLmRpc3BsYXlMaXN0KF9vYmouYWpheENvbnRhaW5lciwgX29iai5hamF4UGF0aCwgcGFyYW1zKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG5cclxuICAgICAgICAgICAgLypcclxuICAgICAgICAgICAgJCgnLmFqYXgtbGlzdC1jb250YWluZXIgLndyYXBwZXInKS5mYWRlT3V0KCBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhhc2ggPSAkLnRyaW0oXCIvY2F0ZWdvcnk9XCIrcGFyYW1zLmNhdGVnb3J5K1wiL3BhZ2VkPVwiK3BhcmFtcy5wYWdlZCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAqL1xyXG5cclxuICAgICAgICB9KTtcclxuXHJcbiAgICB9O1xyXG5cclxuXHJcbiAgICBEcnVwYWwuYmVoYXZpb3JzLmFqYXhMaXN0TG9hZGluZy51cGRhdGVQYXJhbXNGcm9tSGFzaCA9IGZ1bmN0aW9uICgpe1xyXG5cclxuICAgICAgICBsZXQgX29iaiA9IERydXBhbC5iZWhhdmlvcnMuYWpheExpc3RMb2FkaW5nO1xyXG4gICAgICAgIGxldCBoYXNoID0gd2luZG93LmxvY2F0aW9uLmhhc2g7XHJcblxyXG4gICAgICAgIC8vIFNwbGl0IGhhc2ggaW50byBhcnJheSBvZiB2YWx1ZXNcclxuICAgICAgICBsZXQgaGFzaEFycmF5ID0gaGFzaC5zdWJzdHJpbmcoMikuc3BsaXQoJy8nKTtcclxuXHJcbiAgICAgICAgJC5lYWNoKGhhc2hBcnJheSwgZnVuY3Rpb24oIGluZGV4LCB2YWx1ZSApIHtcclxuICAgICAgICAgICAgLy8gRm9yIGVhY2ggdmFsdWUgc3BsaXQgaW50byBrZXkgPT4gdmFsdWUgYXJyYXlcclxuICAgICAgICAgICAgbGV0IHZhbHVlQXJyYXkgPSB2YWx1ZS5zcGxpdCgnPScpO1xyXG4gICAgICAgICAgICAvLyBBZGQvb3ZlcnJpZGUgZGVmYXVsdFBhcmFtcyBvYmplY3RcclxuICAgICAgICAgICAgX29iai5wYXJhbXNbdmFsdWVBcnJheVswXV0gPSB2YWx1ZUFycmF5WzFdO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgIH07XHJcblxyXG5cclxuICAgIERydXBhbC5iZWhhdmlvcnMuYWpheExpc3RMb2FkaW5nLnVwZGF0ZUZpbHRlcnMgPSBmdW5jdGlvbiAocGFyYW1zKXtcclxuXHJcbiAgICAgICAgbGV0IF9vYmogPSBEcnVwYWwuYmVoYXZpb3JzLmFqYXhMaXN0TG9hZGluZztcclxuXHJcbiAgICAgICAgLy8gSGFuZGxlIGRhdGUgaWYgZXhpc3RzXHJcbiAgICAgICAgbGV0IGZyb21TZWxlY3QgPSAkKCBcIi5maWx0ZXJmb3JtIC5mcm9tLWRhdGVcIiApO1xyXG4gICAgICAgIGxldCB0b1NlbGVjdCA9ICQoIFwiLmZpbHRlcmZvcm0gLnRvLWRhdGVcIiApO1xyXG5cclxuICAgICAgICBpZihmcm9tU2VsZWN0Lmxlbmd0aCA+IDAgJiYgdG9TZWxlY3QubGVuZ3RoID4gMCl7XHJcbiAgICAgICAgICAgIGxldCBkYXRlID0gcGFyYW1zLmRhdGUucmVwbGFjZSgnZmllbGRfZGF0ZV9yYW5nZS0tJywnJykuc3BsaXQoJywnKTtcclxuICAgICAgICAgICAgbGV0IGZyb20gPSBkYXRlWzBdLnNwbGl0KCctJyk7XHJcbiAgICAgICAgICAgIGxldCB0byA9IGRhdGVbMV0uc3BsaXQoJy0nKTtcclxuXHJcbiAgICAgICAgICAgIC8vIFVwZGF0ZXMgRmlsdGVycyBWYWx1ZSBvbiBQYWdlXHJcbiAgICAgICAgICAgIGZyb21TZWxlY3QudmFsKERhdGUucGFyc2UoZnJvbVsxXSsnLScrZnJvbVswXSsnLScrZnJvbVsyXSkudG9TdHJpbmcoJ01NTSBkLCB5eXl5JykpO1xyXG4gICAgICAgICAgICB0b1NlbGVjdC52YWwoRGF0ZS5wYXJzZSh0b1sxXSsnLScrdG9bMF0rJy0nK3RvWzJdKS50b1N0cmluZygnTU1NIGQsIHl5eXknKSk7XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgLy8gSGFuZGxlIGNhdGVnb3J5IGlmIGV4aXN0c1xyXG4gICAgICAgIGlmKF9vYmouY2F0ZWdvcnkubGVuZ3RoID4gMCl7XHJcbiAgICAgICAgICAgIGxldCBjYXRlZ29yeTtcclxuXHJcbiAgICAgICAgICAgIGlmKHBhcmFtcy5jYXRlZ29yeSAhPT0gJ2FsbCcpe1xyXG4gICAgICAgICAgICAgICAgY2F0ZWdvcnkgPSAnLnRlcm0tJytwYXJhbXMuY2F0ZWdvcnkucmVwbGFjZSgnZmllbGRfY2F0ZWdvcnktLScsJycpO1xyXG4gICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgIGNhdGVnb3J5ID0gJ2FsbCc7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIFVwZGF0ZXMgRmlsdGVycyBWYWx1ZSBvbiBQYWdlXHJcbiAgICAgICAgICAgIF9vYmouY2F0ZWdvcnkudmFsKGNhdGVnb3J5KS5ibHVyKCkuZHJvcGRvd24oXCJ1cGRhdGVcIik7XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICB9O1xyXG5cclxuXHJcbiAgICBEcnVwYWwuYmVoYXZpb3JzLmFqYXhMaXN0TG9hZGluZy5kaXNwbGF5TGlzdCA9IGZ1bmN0aW9uICggJGNvbnRhaW5lciwgJHBhdGgsICRwYXJhbXMgKXtcclxuXHJcbiAgICAgICAgbGV0IF9vYmogPSBEcnVwYWwuYmVoYXZpb3JzLmFqYXhMaXN0TG9hZGluZztcclxuXHJcbiAgICAgICAgLy8gSGFuZGxlIGNsYXNzIGZvciBsb2FkaW5nIGljb25cclxuICAgICAgICAkY29udGFpbmVyLmh0bWwoJycpLnJlbW92ZUNsYXNzKCdsb2FkZWQnKTtcclxuXHJcbiAgICAgICAgLy8gVXBkYXRlIEZpbHRlcnNcclxuICAgICAgICBfb2JqLnVwZGF0ZUZpbHRlcnMoJHBhcmFtcyk7XHJcblxyXG4gICAgICAgIF9vYmoueGhyID0gJC5hamF4KHtcclxuICAgICAgICAgICAgdHlwZTogJ1BPU1QnLFxyXG4gICAgICAgICAgICB1cmw6ICRwYXRoKyc/cmVzcG9uc2VfdHlwZT1hamF4JyxcclxuICAgICAgICAgICAgZGF0YTogJHBhcmFtcyxcclxuICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzdWx0KSB7XHJcblxyXG4gICAgICAgICAgICAgICAgbGV0IHdyYXBwZXIgPSAkKCBcIjxkaXYvPlwiLCB7ICdjbGFzcyc6ICd3cmFwcGVyJ30pO1xyXG4gICAgICAgICAgICAgICAgd3JhcHBlci5odG1sKHJlc3VsdCk7XHJcbiAgICAgICAgICAgICAgICAkY29udGFpbmVyLmh0bWwod3JhcHBlcik7XHJcbiAgICAgICAgICAgICAgICAkY29udGFpbmVyLmFkZENsYXNzKCdsb2FkZWQnKTtcclxuICAgICAgICAgICAgICAgIERydXBhbC5hdHRhY2hCZWhhdmlvcnMoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAvKlxyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJHBhdGgrJz9yZXNwb25zZV90eXBlPWFqYXgnKTtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCRwYXJhbXMpO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzdWx0KTtcclxuICAgICAgICAgICAgICAgICovXHJcblxyXG5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgIH07XHJcblxyXG5cclxuXHJcbiAgICBEcnVwYWwuYmVoYXZpb3JzLmFqYXhMaXN0TG9hZGluZy5nZXRUb3BQb3NpdGlvbiA9IGZ1bmN0aW9uKCRlbGVtKXtcclxuXHJcbiAgICAgICAgcmV0dXJuICRlbGVtLm9mZnNldCgpLnRvcCAtIDEwMDtcclxuICAgIH07XHJcblxyXG5cclxuXHJcbn0oalF1ZXJ5LCBEcnVwYWwpKTtcclxuIl19
