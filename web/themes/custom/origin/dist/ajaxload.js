"use strict";!function(s,n){n.behaviors.ajaxListLoading={},n.behaviors.ajaxListLoading.xhr=null,n.behaviors.ajaxListLoading.ajaxContainer="",n.behaviors.ajaxListLoading.ajaxPath="",n.behaviors.ajaxListLoading.params="",n.behaviors.ajaxListLoading.filterForm=s(".filterform"),n.behaviors.ajaxListLoading.category=s(".filterform .category"),n.behaviors.ajaxListLoading.attach=function(a){var o=n.behaviors.ajaxListLoading;s(".ajax-list-container",a).once("ajaxListLoading").each(function(){o.ajaxContainer=s(this),o.ajaxPath=o.ajaxContainer.attr("data-ajax-path"),o.params=o.ajaxContainer.data("default-params"),""!==window.location.hash&&o.updateParamsFromHash(),o.displayList(o.ajaxContainer,o.ajaxPath,o.params),s(window).off("hashchange.form-fragment").on("hashchange",function(){o.updateParamsFromHash(),o.displayList(o.ajaxContainer,o.ajaxPath,o.params)})}),s(".pager.ajax a").off("click").on("click",function(a){a.preventDefault(),a.stopPropagation();var t=s(this).data("params"),i=o.getTopPosition(s(".ajax-list-container"));0<o.category.length&&(-1===(a=o.category.val()).indexOf("all")&&(t.category="field_category--"+a.replace(".term-",""))),o.xhr.abort(),window.history.pushState({params:JSON.stringify(t)},null,window.location),0<o.filterForm.length&&(i=o.getTopPosition(o.filterForm)),s("html,body").animate({scrollTop:i},"500"),s(".ajax-list-container .wrapper").fadeOut(function(){o.displayList(o.ajaxContainer,o.ajaxPath,t)})})},n.behaviors.ajaxListLoading.updateParamsFromHash=function(){var i=n.behaviors.ajaxListLoading,a=window.location.hash.substring(2).split("/");s.each(a,function(a,t){t=t.split("=");i.params[t[0]]=t[1]})},n.behaviors.ajaxListLoading.updateFilters=function(a){var t,i,o=n.behaviors.ajaxListLoading,e=s(".filterform .from-date"),r=s(".filterform .to-date");0<e.length&&0<r.length&&(t=(i=a.date.replace("field_date_range--","").split(","))[0].split("-"),i=i[1].split("-"),e.val(Date.parse(t[1]+"-"+t[0]+"-"+t[2]).toString("MMM d, yyyy")),r.val(Date.parse(i[1]+"-"+i[0]+"-"+i[2]).toString("MMM d, yyyy"))),0<o.category.length&&(i=void 0,i="all"!==a.category?".term-"+a.category.replace("field_category--",""):"all",o.category.val(i).blur().dropdown("update"))},n.behaviors.ajaxListLoading.displayList=function(i,a,t){var o=n.behaviors.ajaxListLoading;i.html("").removeClass("loaded"),o.updateFilters(t),o.xhr=s.ajax({type:"POST",url:a+"?response_type=ajax",data:t,success:function(a){var t=s(a).find("#block-origin-content").html(),a=s("<div/>",{class:"wrapper"});a.html('<div class="block block-system block-system-main-block">'+t+"</div>"),i.html(a),i.addClass("loaded"),n.attachBehaviors()}})},n.behaviors.ajaxListLoading.getTopPosition=function(a){return a.offset().top-100}}(jQuery,Drupal);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFqYXhsb2FkLmpzIl0sIm5hbWVzIjpbIiQiLCJEcnVwYWwiLCJhamF4TG9hZFNjcmlwdCIsImJlaGF2aW9ycyIsImFqYXhMaXN0TG9hZGluZyIsInhociIsImFqYXhQYXRoIiwiYWpheENvbnRhaW5lciIsInBhcmFtcyIsImNhdGVnb3J5IiwiY29udGV4dCIsImF0dGFjaCIsIm9uY2UiLCJlYWNoIiwiYXR0ciIsIl9vYmoiLCJkYXRhIiwid2luZG93IiwibG9jYXRpb24iLCJoYXNoIiwidXBkYXRlUGFyYW1zRnJvbUhhc2giLCJkaXNwbGF5TGlzdCIsIm9mZiIsIm9uIiwiZXZlbnQiLCJwcmV2ZW50RGVmYXVsdCIsInRoaXMiLCJpbmRleE9mIiwibGVuZ3RoIiwidmFsIiwicmVwbGFjZSIsIkpTT04iLCJzdHJpbmdpZnkiLCJmaWx0ZXJGb3JtIiwidG9wIiwiZ2V0VG9wUG9zaXRpb24iLCJhbmltYXRlIiwic2Nyb2xsVG9wIiwiZmFkZU91dCIsImhhc2hBcnJheSIsImZyb21TZWxlY3QiLCJpbmRleCIsInZhbHVlIiwidmFsdWVBcnJheSIsInNwbGl0IiwiZGF0ZSIsInVwZGF0ZUZpbHRlcnMiLCJmcm9tIiwidG9TZWxlY3QiLCJ0byIsIkRhdGUiLCJwYXJzZSIsInRvU3RyaW5nIiwicmVtb3ZlQ2xhc3MiLCIkY29udGFpbmVyIiwiaHRtbCIsIndyYXBwZXIiLCJibHVyIiwiZHJvcGRvd24iLCIkcGF0aCIsIiRwYXJhbXMiLCIkZWxlbSIsIm9mZnNldCIsInR5cGUiLCJzdWNjZXNzIiwicmVzdWx0IiwiZmluZCIsImNsYXNzIiwiYWRkQ2xhc3MiLCJhdHRhY2hCZWhhdmlvcnMiLCJqUXVlcnkiXSwibWFwcGluZ3MiOiJjQUFDLFNBQXlCQSxFQUFHQyxHQUE1QkEsRUFBU0MsVUFBQUEsZ0JBQTJCLEdBRWpDRCxFQUFPRSxVQUFVQyxnQkFBa0JDLElBQW5DLEtBQ0FKLEVBQU9FLFVBQVVDLGdCQUFnQkMsY0FBWSxHQUU3Q0osRUFBT0UsVUFBVUMsZ0JBQWdC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LE1BS0gwQixFQUFBQSxTQUFhM0IsSUFBQXBCLEdBQVVnRCxPQUFBQyxTQUFBLFlBTTNCekQsRUFBQUUsVUFBQUMsZ0JBQUFpQixZQUFBLFNBQUFpQyxFQUFBSyxFQUFBQyxHQUVoQixJQUFBN0MsRUFBQWQsRUFBQUUsVUFBQUMsZ0JBS2FrRCxFQUFBQyxLQUFBLElBQUFGLFlBQUEsVUF0Qkx0QyxFQUFLK0IsY0FBY2MsR0ErQm5CN0MsRUFBTzhDLElBQU1DLEVBQUFBLEtBQVM1QixDQUYxQjZCLEtBQUEsT0FPTTlELElBekxUMEQsRUFBRCxzQkEwSlkzQyxLQUFNNEMsRUFDTkksUUFBUyxTQUFTQyxHQUVkLElBQUlWLEVBQU92RCxFQUFFaUUsR0FBUUMsS0FBSyx5QkFBeUJYLE9BQy9DQyxFQUFVeEQsRUFBRyxTQUFVLENBQUVtRSxNQUFTLFlBQ3RDWCxFQUFRRCxLQUFLLDJEQUE2REEsRUFBTyxVQUNqRkQsRUFBV0MsS0FBS0MsR0FDaEJGLEVBQVdjLFNBQVMsVUFDcEJuRSxFQUFPb0Usc0JBZ0JuQnBFLEVBQU9FLFVBQVVDLGdCQUFnQitCLGVBQWlCLFNBQVMwQixHQUV2RCxPQUFPQSxFQUFNQyxTQUFTNUIsSUFBTSxLQXBMbkMsQ0F5TENvQyxPQUFRckUiLCJmaWxlIjoiYWpheGxvYWQuanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gYWpheExvYWRTY3JpcHQgKCQsIERydXBhbCkge1xuXG4gICAgRHJ1cGFsLmJlaGF2aW9ycy5hamF4TGlzdExvYWRpbmcgPSB7fTtcbiAgICBEcnVwYWwuYmVoYXZpb3JzLmFqYXhMaXN0TG9hZGluZy54aHIgPSBudWxsOyAvLyBhamF4IGNhbGxcbiAgICBEcnVwYWwuYmVoYXZpb3JzLmFqYXhMaXN0TG9hZGluZy5hamF4Q29udGFpbmVyID0gJyc7XG4gICAgRHJ1cGFsLmJlaGF2aW9ycy5hamF4TGlzdExvYWRpbmcuYWpheFBhdGggPSAnJztcbiAgICBEcnVwYWwuYmVoYXZpb3JzLmFqYXhMaXN0TG9hZGluZy5wYXJhbXMgPSAnJztcbiAgICBEcnVwYWwuYmVoYXZpb3JzLmFqYXhMaXN0TG9hZGluZy5maWx0ZXJGb3JtID0gJCgnLmZpbHRlcmZvcm0nKTtcbiAgICBEcnVwYWwuYmVoYXZpb3JzLmFqYXhMaXN0TG9hZGluZy5jYXRlZ29yeSA9ICQoIFwiLmZpbHRlcmZvcm0gLmNhdGVnb3J5XCIgKTtcblxuICAgIERydXBhbC5iZWhhdmlvcnMuYWpheExpc3RMb2FkaW5nLmF0dGFjaCA9IGZ1bmN0aW9uIChjb250ZXh0KSB7XG5cbiAgICAgICAgbGV0IF9vYmogPSBEcnVwYWwuYmVoYXZpb3JzLmFqYXhMaXN0TG9hZGluZztcblxuICAgICAgICAkKCcuYWpheC1saXN0LWNvbnRhaW5lcicsIGNvbnRleHQpLm9uY2UoJ2FqYXhMaXN0TG9hZGluZycpLmVhY2goZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICBfb2JqLmFqYXhDb250YWluZXIgPSAkKHRoaXMpO1xuICAgICAgICAgICAgX29iai5hamF4UGF0aCA9IF9vYmouYWpheENvbnRhaW5lci5hdHRyKCdkYXRhLWFqYXgtcGF0aCcpO1xuICAgICAgICAgICAgX29iai5wYXJhbXMgPSBfb2JqLmFqYXhDb250YWluZXIuZGF0YSgnZGVmYXVsdC1wYXJhbXMnKTtcblxuICAgICAgICAgICAgLy8gSWYgaGFzaCBoYXMgYmVlbiBwcm92aWRlZCwgdXBkYXRlIHBhcmFtc1xuICAgICAgICAgICAgaWYod2luZG93LmxvY2F0aW9uLmhhc2ggIT09ICcnKXtcbiAgICAgICAgICAgICAgICBfb2JqLnVwZGF0ZVBhcmFtc0Zyb21IYXNoKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIERpc3BsYXkgbGlzdFxuICAgICAgICAgICAgX29iai5kaXNwbGF5TGlzdChfb2JqLmFqYXhDb250YWluZXIsIF9vYmouYWpheFBhdGgsIF9vYmoucGFyYW1zKTtcblxuICAgICAgICAgICAgLy8gT24gaGFzaCBjaGFuZ2UsIHVwZGF0ZSBwYXJhbXMsIHJlbG9hZCBsaXN0XG4gICAgICAgICAgICAkKHdpbmRvdykub2ZmKCdoYXNoY2hhbmdlLmZvcm0tZnJhZ21lbnQnKS5vbignaGFzaGNoYW5nZScsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIF9vYmoudXBkYXRlUGFyYW1zRnJvbUhhc2goKTtcbiAgICAgICAgICAgICAgICBfb2JqLmRpc3BsYXlMaXN0KF9vYmouYWpheENvbnRhaW5lciwgX29iai5hamF4UGF0aCwgX29iai5wYXJhbXMpO1xuICAgICAgICAgICAgfSk7XG5cblxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBBamF4IHBhZ2VyIGxpbmtzXG4gICAgICAgICQoJy5wYWdlci5hamF4IGEnKS5vZmYoIFwiY2xpY2tcIiApLm9uKCAnY2xpY2snLCBmdW5jdGlvbihldmVudCl7XG5cbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcblxuICAgICAgICAgICAgbGV0IHBhcmFtcyA9ICQodGhpcykuZGF0YSgncGFyYW1zJyk7XG4gICAgICAgICAgICBsZXQgdG9wID0gX29iai5nZXRUb3BQb3NpdGlvbigkKCcuYWpheC1saXN0LWNvbnRhaW5lcicpKTtcblxuICAgICAgICAgICAgaWYoX29iai5jYXRlZ29yeS5sZW5ndGggPiAwKXtcbiAgICAgICAgICAgICAgICBsZXQgY2F0ZWdvcnkgPSBfb2JqLmNhdGVnb3J5LnZhbCgpO1xuICAgICAgICAgICAgICAgIGlmKGNhdGVnb3J5LmluZGV4T2YoJ2FsbCcpID09PSAtMSl7XG4gICAgICAgICAgICAgICAgICAgIHBhcmFtcy5jYXRlZ29yeSA9ICdmaWVsZF9jYXRlZ29yeS0tJytjYXRlZ29yeS5yZXBsYWNlKCcudGVybS0nLCcnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIEFib3J0IGFueSBwb3NzaWJsZSBjdXJyZW50IGFqYXggY2FsbFxuICAgICAgICAgICAgX29iai54aHIuYWJvcnQoKTtcblxuICAgICAgICAgICAgLy8gU2V0IGhpc3Rvcnkgc3RhdGVcbiAgICAgICAgICAgIHdpbmRvdy5oaXN0b3J5LnB1c2hTdGF0ZSh7cGFyYW1zOkpTT04uc3RyaW5naWZ5KHBhcmFtcyl9LG51bGwsd2luZG93LmxvY2F0aW9uKTtcblxuICAgICAgICAgICAgLy8gR2V0IHRvcCBvZiBmaWx0ZXJzIGlmIHByZXNlbnRcbiAgICAgICAgICAgIGlmKF9vYmouZmlsdGVyRm9ybS5sZW5ndGggPiAwKXtcbiAgICAgICAgICAgICAgICB0b3AgPSBfb2JqLmdldFRvcFBvc2l0aW9uKF9vYmouZmlsdGVyRm9ybSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIEFuaW1hdGUgdG8gcG9zaXRpb25cbiAgICAgICAgICAgICQoXCJodG1sLGJvZHlcIikuYW5pbWF0ZShcbiAgICAgICAgICAgICAgICB7c2Nyb2xsVG9wOiB0b3B9LCAnNTAwJyk7XG5cbiAgICAgICAgICAgIC8vIEZhZGUgb3V0IHdyYXBwZXJcbiAgICAgICAgICAgICQoJy5hamF4LWxpc3QtY29udGFpbmVyIC53cmFwcGVyJykuZmFkZU91dCggZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAvLyBUcmlnZ2VyIHRoZSBkaXNwbGF5IG9mIHRoZSBsaXN0XG4gICAgICAgICAgICAgICAgX29iai5kaXNwbGF5TGlzdChfb2JqLmFqYXhDb250YWluZXIsIF9vYmouYWpheFBhdGgsIHBhcmFtcyk7XG4gICAgICAgICAgICB9KTtcblxuXG4gICAgICAgICAgICAvKlxuICAgICAgICAgICAgJCgnLmFqYXgtbGlzdC1jb250YWluZXIgLndyYXBwZXInKS5mYWRlT3V0KCBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5oYXNoID0gJC50cmltKFwiL2NhdGVnb3J5PVwiK3BhcmFtcy5jYXRlZ29yeStcIi9wYWdlZD1cIitwYXJhbXMucGFnZWQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAqL1xuXG4gICAgICAgIH0pO1xuXG4gICAgfTtcblxuXG4gICAgRHJ1cGFsLmJlaGF2aW9ycy5hamF4TGlzdExvYWRpbmcudXBkYXRlUGFyYW1zRnJvbUhhc2ggPSBmdW5jdGlvbiAoKXtcblxuICAgICAgICBsZXQgX29iaiA9IERydXBhbC5iZWhhdmlvcnMuYWpheExpc3RMb2FkaW5nO1xuICAgICAgICBsZXQgaGFzaCA9IHdpbmRvdy5sb2NhdGlvbi5oYXNoO1xuXG4gICAgICAgIC8vIFNwbGl0IGhhc2ggaW50byBhcnJheSBvZiB2YWx1ZXNcbiAgICAgICAgbGV0IGhhc2hBcnJheSA9IGhhc2guc3Vic3RyaW5nKDIpLnNwbGl0KCcvJyk7XG5cbiAgICAgICAgJC5lYWNoKGhhc2hBcnJheSwgZnVuY3Rpb24oIGluZGV4LCB2YWx1ZSApIHtcbiAgICAgICAgICAgIC8vIEZvciBlYWNoIHZhbHVlIHNwbGl0IGludG8ga2V5ID0+IHZhbHVlIGFycmF5XG4gICAgICAgICAgICBsZXQgdmFsdWVBcnJheSA9IHZhbHVlLnNwbGl0KCc9Jyk7XG4gICAgICAgICAgICAvLyBBZGQvb3ZlcnJpZGUgZGVmYXVsdFBhcmFtcyBvYmplY3RcbiAgICAgICAgICAgIF9vYmoucGFyYW1zW3ZhbHVlQXJyYXlbMF1dID0gdmFsdWVBcnJheVsxXTtcbiAgICAgICAgfSk7XG5cbiAgICB9O1xuXG5cbiAgICBEcnVwYWwuYmVoYXZpb3JzLmFqYXhMaXN0TG9hZGluZy51cGRhdGVGaWx0ZXJzID0gZnVuY3Rpb24gKHBhcmFtcyl7XG5cbiAgICAgICAgbGV0IF9vYmogPSBEcnVwYWwuYmVoYXZpb3JzLmFqYXhMaXN0TG9hZGluZztcblxuICAgICAgICAvLyBIYW5kbGUgZGF0ZSBpZiBleGlzdHNcbiAgICAgICAgbGV0IGZyb21TZWxlY3QgPSAkKCBcIi5maWx0ZXJmb3JtIC5mcm9tLWRhdGVcIiApO1xuICAgICAgICBsZXQgdG9TZWxlY3QgPSAkKCBcIi5maWx0ZXJmb3JtIC50by1kYXRlXCIgKTtcblxuICAgICAgICBpZihmcm9tU2VsZWN0Lmxlbmd0aCA+IDAgJiYgdG9TZWxlY3QubGVuZ3RoID4gMCl7XG4gICAgICAgICAgICBsZXQgZGF0ZSA9IHBhcmFtcy5kYXRlLnJlcGxhY2UoJ2ZpZWxkX2RhdGVfcmFuZ2UtLScsJycpLnNwbGl0KCcsJyk7XG4gICAgICAgICAgICBsZXQgZnJvbSA9IGRhdGVbMF0uc3BsaXQoJy0nKTtcbiAgICAgICAgICAgIGxldCB0byA9IGRhdGVbMV0uc3BsaXQoJy0nKTtcblxuICAgICAgICAgICAgLy8gVXBkYXRlcyBGaWx0ZXJzIFZhbHVlIG9uIFBhZ2VcbiAgICAgICAgICAgIGZyb21TZWxlY3QudmFsKERhdGUucGFyc2UoZnJvbVsxXSsnLScrZnJvbVswXSsnLScrZnJvbVsyXSkudG9TdHJpbmcoJ01NTSBkLCB5eXl5JykpO1xuICAgICAgICAgICAgdG9TZWxlY3QudmFsKERhdGUucGFyc2UodG9bMV0rJy0nK3RvWzBdKyctJyt0b1syXSkudG9TdHJpbmcoJ01NTSBkLCB5eXl5JykpO1xuICAgICAgICB9XG5cblxuICAgICAgICAvLyBIYW5kbGUgY2F0ZWdvcnkgaWYgZXhpc3RzXG4gICAgICAgIGlmKF9vYmouY2F0ZWdvcnkubGVuZ3RoID4gMCl7XG4gICAgICAgICAgICBsZXQgY2F0ZWdvcnk7XG5cbiAgICAgICAgICAgIGlmKHBhcmFtcy5jYXRlZ29yeSAhPT0gJ2FsbCcpe1xuICAgICAgICAgICAgICAgIGNhdGVnb3J5ID0gJy50ZXJtLScrcGFyYW1zLmNhdGVnb3J5LnJlcGxhY2UoJ2ZpZWxkX2NhdGVnb3J5LS0nLCcnKTtcbiAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgIGNhdGVnb3J5ID0gJ2FsbCc7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIFVwZGF0ZXMgRmlsdGVycyBWYWx1ZSBvbiBQYWdlXG4gICAgICAgICAgICBfb2JqLmNhdGVnb3J5LnZhbChjYXRlZ29yeSkuYmx1cigpLmRyb3Bkb3duKFwidXBkYXRlXCIpO1xuICAgICAgICB9XG5cblxuICAgIH07XG5cblxuICAgIERydXBhbC5iZWhhdmlvcnMuYWpheExpc3RMb2FkaW5nLmRpc3BsYXlMaXN0ID0gZnVuY3Rpb24gKCAkY29udGFpbmVyLCAkcGF0aCwgJHBhcmFtcyApe1xuXG4gICAgICAgIGxldCBfb2JqID0gRHJ1cGFsLmJlaGF2aW9ycy5hamF4TGlzdExvYWRpbmc7XG5cbiAgICAgICAgLy8gSGFuZGxlIGNsYXNzIGZvciBsb2FkaW5nIGljb25cbiAgICAgICAgJGNvbnRhaW5lci5odG1sKCcnKS5yZW1vdmVDbGFzcygnbG9hZGVkJyk7XG5cbiAgICAgICAgLy8gVXBkYXRlIEZpbHRlcnNcbiAgICAgICAgX29iai51cGRhdGVGaWx0ZXJzKCRwYXJhbXMpO1xuXG4gICAgICAgIF9vYmoueGhyID0gJC5hamF4KHtcbiAgICAgICAgICAgIHR5cGU6ICdQT1NUJyxcbiAgICAgICAgICAgIHVybDogJHBhdGgrJz9yZXNwb25zZV90eXBlPWFqYXgnLFxuICAgICAgICAgICAgZGF0YTogJHBhcmFtcyxcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlc3VsdCkge1xuXG4gICAgICAgICAgICAgICAgbGV0IGh0bWwgPSAkKHJlc3VsdCkuZmluZCgnI2Jsb2NrLW9yaWdpbi1jb250ZW50JykuaHRtbCgpO1xuICAgICAgICAgICAgICAgIGxldCB3cmFwcGVyID0gJCggXCI8ZGl2Lz5cIiwgeyAnY2xhc3MnOiAnd3JhcHBlcid9KTtcbiAgICAgICAgICAgICAgICB3cmFwcGVyLmh0bWwoJzxkaXYgY2xhc3M9XCJibG9jayBibG9jay1zeXN0ZW0gYmxvY2stc3lzdGVtLW1haW4tYmxvY2tcIj4nICsgaHRtbCArICc8L2Rpdj4nKTtcbiAgICAgICAgICAgICAgICAkY29udGFpbmVyLmh0bWwod3JhcHBlcik7XG4gICAgICAgICAgICAgICAgJGNvbnRhaW5lci5hZGRDbGFzcygnbG9hZGVkJyk7XG4gICAgICAgICAgICAgICAgRHJ1cGFsLmF0dGFjaEJlaGF2aW9ycygpO1xuXG4gICAgICAgICAgICAgICAgLypcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygkcGF0aCsnP3Jlc3BvbnNlX3R5cGU9YWpheCcpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCRwYXJhbXMpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgKi9cblxuXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgfTtcblxuXG5cbiAgICBEcnVwYWwuYmVoYXZpb3JzLmFqYXhMaXN0TG9hZGluZy5nZXRUb3BQb3NpdGlvbiA9IGZ1bmN0aW9uKCRlbGVtKXtcblxuICAgICAgICByZXR1cm4gJGVsZW0ub2Zmc2V0KCkudG9wIC0gMTAwO1xuICAgIH07XG5cblxuXG59KGpRdWVyeSwgRHJ1cGFsKSk7XG4iXX0=
