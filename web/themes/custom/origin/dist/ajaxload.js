"use strict";!function(l,d){d.behaviors.ajaxListLoading={},d.behaviors.ajaxListLoading.xhr=null,d.behaviors.ajaxListLoading.ajaxContainer="",d.behaviors.ajaxListLoading.ajaxPath="",d.behaviors.ajaxListLoading.params="",d.behaviors.ajaxListLoading.filterForm=l(".filterform"),d.behaviors.ajaxListLoading.category=l(".filterform .category"),d.behaviors.ajaxListLoading.attach=function(a){var r=d.behaviors.ajaxListLoading;l(".ajax-list-container",a).once("ajaxListLoading").each(function(){r.ajaxContainer=l(this),r.ajaxPath=r.ajaxContainer.attr("data-ajax-path"),r.params=r.ajaxContainer.data("default-params"),""!==window.location.hash&&r.updateParamsFromHash(),r.displayList(r.ajaxContainer,r.ajaxPath,r.params),l(window).off("hashchange.form-fragment").on("hashchange",function(){r.updateParamsFromHash(),r.displayList(r.ajaxContainer,r.ajaxPath,r.params)})}),l(".pager.ajax a").off("click").on("click",function(a){a.preventDefault(),a.stopPropagation();var t=l(this).data("params"),i=r.getTopPosition(l(".ajax-list-container"));if(0<r.category.length){var o=r.category.val();-1===o.indexOf("all")&&(t.category="field_category--"+o.replace(".term-",""))}r.xhr.abort(),window.history.pushState({params:JSON.stringify(t)},null,window.location),0<r.filterForm.length&&(i=r.getTopPosition(r.filterForm)),l("html,body").animate({scrollTop:i},"500"),l(".ajax-list-container .wrapper").fadeOut(function(){r.displayList(r.ajaxContainer,r.ajaxPath,t)})})},d.behaviors.ajaxListLoading.updateParamsFromHash=function(){var o=d.behaviors.ajaxListLoading,a=window.location.hash.substring(2).split("/");l.each(a,function(a,t){var i=t.split("=");o.params[i[0]]=i[1]})},d.behaviors.ajaxListLoading.updateFilters=function(a){var t=d.behaviors.ajaxListLoading,i=l(".filterform .from-date"),o=l(".filterform .to-date");if(0<i.length&&0<o.length){var r=a.date.replace("field_date_range--","").split(","),e=r[0].split("-"),n=r[1].split("-");i.val(moment(Date.parse(e[1]+"-"+e[0]+"-"+e[2])).format("MMM D, YYYY")),o.val(moment(Date.parse(n[1]+"-"+n[0]+"-"+n[2])).format("MMM D, YYYY"))}if(0<t.category.length){var s=void 0;s="all"!==a.category?".term-"+a.category.replace("field_category--",""):"all",t.category.val(s).blur().dropdown("update")}},d.behaviors.ajaxListLoading.displayList=function(i,a,t){var o=d.behaviors.ajaxListLoading;i.html("").removeClass("loaded"),o.updateFilters(t),o.xhr=l.ajax({type:"POST",url:a+"?response_type=ajax",data:t,success:function(a){var t=l("<div/>",{class:"wrapper"});t.html(a),i.html(t),i.addClass("loaded"),d.attachBehaviors(),d.blazy.init.revalidate()}})},d.behaviors.ajaxListLoading.getTopPosition=function(a){return a.offset().top-100}}(jQuery,Drupal);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFqYXhsb2FkLmpzIl0sIm5hbWVzIjpbIiQiLCJEcnVwYWwiLCJhamF4TG9hZFNjcmlwdCIsImJlaGF2aW9ycyIsImFqYXhMaXN0TG9hZGluZyIsInhociIsImFqYXhDb250YWluZXIiLCJhamF4UGF0aCIsInBhcmFtcyIsImNhdGVnb3J5IiwiY29udGV4dCIsImVhY2giLCJfb2JqIiwiYXR0ciIsImRhdGEiLCJ3aW5kb3ciLCJsb2NhdGlvbiIsImhhc2giLCJ1cGRhdGVQYXJhbXNGcm9tSGFzaCIsImRpc3BsYXlMaXN0Iiwib2ZmIiwib24iLCJldmVudCIsInByZXZlbnREZWZhdWx0Iiwic3RvcFByb3BhZ2F0aW9uIiwidGhpcyIsInRvcCIsImdldFRvcFBvc2l0aW9uIiwibGVuZ3RoIiwidmFsIiwicmVwbGFjZSIsImFib3J0IiwiaGlzdG9yeSIsInB1c2hTdGF0ZSIsIkpTT04iLCJzdHJpbmdpZnkiLCJmaWx0ZXJGb3JtIiwiYW5pbWF0ZSIsInNjcm9sbFRvcCIsImZhZGVPdXQiLCJoYXNoQXJyYXkiLCJzdWJzdHJpbmciLCJzcGxpdCIsImluZGV4IiwidmFsdWUiLCJ2YWx1ZUFycmF5IiwidXBkYXRlRmlsdGVycyIsImRhdGUiLCJmcm9tU2VsZWN0IiwidG9TZWxlY3QiLCJtb21lbnQiLCJEYXRlIiwidG8iLCJmcm9tIiwicGFyc2UiLCJmb3JtYXQiLCJibHVyIiwiZHJvcGRvd24iLCJ0eXBlIiwiJGNvbnRhaW5lciIsIiRwYXRoIiwiJHBhcmFtcyIsImh0bWwiLCJ3cmFwcGVyIiwiYWRkQ2xhc3MiLCJibGF6eSIsInVybCIsInN1Y2Nlc3MiLCJyZXN1bHQiLCJjbGFzcyIsImF0dGFjaEJlaGF2aW9ycyIsIiRlbGVtIiwib2Zmc2V0IiwialF1ZXJ5Il0sIm1hcHBpbmdzIjoiY0FBQyxTQUF5QkEsRUFBR0MsR0FBNUJBLEVBQVNDLFVBQUFBLGdCQUEyQixHQUdqQ0QsRUFBT0UsVUFBVUMsZ0JBQWdCQyxJQUFNLEtBRHZDSixFQUFPRSxVQUFVQyxnQkFB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VyxDQVN4QixJQUFBbkIsT0FBQUEsRUE3QlJBLEVBK0JLLFFBQUFELEVBQUFDLFNBL0JMLFNBQUFELEVBQUFDLFNBQUFxQixRQUFBLG1CQUFBLElBcUNpQjFCLE1BSWJRLEVBQUFILFNBQUFvQixJQUFBcEIsR0FBQStDLE9BQUFDLFNBQUEsWUFPSUMsRUFBQUEsVUFBTXRELGdCQURRZSxZQUFBLFNBQUF3QyxFQUFBQyxFQUFBQyxHQUdkL0MsSUFBQUEsRUFBTStDLEVBSFExRCxVQUFBQyxnQkFNVnVELEVBQUFHLEtBQUlDLElBQUFBLFlBQVUsVUFHZEosRUFBQUEsY0FBV0ssR0FFWC9ELEVBQUFBLElBQUFBLEVBQUFBLEtBQU9nRSxDQVZYUCxLQUFNLE9BWUZRLElBQUFOLEVBQUEsc0JBVko5QyxLQUFNK0MsRUFDTk0sUUFBUyxTQUFTQyxHQUVkLElBQUlMLEVBQVUvRCxFQUFHLFNBQVUsQ0FBRXFFLE1BQVMsWUFjekNOLEVBQUFELEtBQUFNLEdBcEJMVCxFQUFBRyxLQUFBQyxHQVZKSixFQUFBSyxTQUFBLFVBb0JZL0QsRUFBT3FFLGtCQWlCWm5FLEVBQVVDLE1BQUFBLEtBQUFBLGlCQUFqQkgsRUFBT0UsVUFBVUMsZ0JBQWdCdUIsZUFBaUIsU0FBUzRDLEdBRXZELE9BQU9BLEVBQU1DLFNBQVM5QyxJQUFNLEtBcExuQyxDQXlMQytDLE9BQVF4RSIsImZpbGUiOiJhamF4bG9hZC5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBhamF4TG9hZFNjcmlwdCAoJCwgRHJ1cGFsKSB7XHJcblxyXG4gICAgRHJ1cGFsLmJlaGF2aW9ycy5hamF4TGlzdExvYWRpbmcgPSB7fTtcclxuICAgIERydXBhbC5iZWhhdmlvcnMuYWpheExpc3RMb2FkaW5nLnhociA9IG51bGw7IC8vIGFqYXggY2FsbFxyXG4gICAgRHJ1cGFsLmJlaGF2aW9ycy5hamF4TGlzdExvYWRpbmcuYWpheENvbnRhaW5lciA9ICcnO1xyXG4gICAgRHJ1cGFsLmJlaGF2aW9ycy5hamF4TGlzdExvYWRpbmcuYWpheFBhdGggPSAnJztcclxuICAgIERydXBhbC5iZWhhdmlvcnMuYWpheExpc3RMb2FkaW5nLnBhcmFtcyA9ICcnO1xyXG4gICAgRHJ1cGFsLmJlaGF2aW9ycy5hamF4TGlzdExvYWRpbmcuZmlsdGVyRm9ybSA9ICQoJy5maWx0ZXJmb3JtJyk7XHJcbiAgICBEcnVwYWwuYmVoYXZpb3JzLmFqYXhMaXN0TG9hZGluZy5jYXRlZ29yeSA9ICQoIFwiLmZpbHRlcmZvcm0gLmNhdGVnb3J5XCIgKTtcclxuXHJcbiAgICBEcnVwYWwuYmVoYXZpb3JzLmFqYXhMaXN0TG9hZGluZy5hdHRhY2ggPSBmdW5jdGlvbiAoY29udGV4dCkge1xyXG5cclxuICAgICAgICBsZXQgX29iaiA9IERydXBhbC5iZWhhdmlvcnMuYWpheExpc3RMb2FkaW5nO1xyXG5cclxuICAgICAgICAkKCcuYWpheC1saXN0LWNvbnRhaW5lcicsIGNvbnRleHQpLm9uY2UoJ2FqYXhMaXN0TG9hZGluZycpLmVhY2goZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICAgICAgX29iai5hamF4Q29udGFpbmVyID0gJCh0aGlzKTtcclxuICAgICAgICAgICAgX29iai5hamF4UGF0aCA9IF9vYmouYWpheENvbnRhaW5lci5hdHRyKCdkYXRhLWFqYXgtcGF0aCcpO1xyXG4gICAgICAgICAgICBfb2JqLnBhcmFtcyA9IF9vYmouYWpheENvbnRhaW5lci5kYXRhKCdkZWZhdWx0LXBhcmFtcycpO1xyXG5cclxuICAgICAgICAgICAgLy8gSWYgaGFzaCBoYXMgYmVlbiBwcm92aWRlZCwgdXBkYXRlIHBhcmFtc1xyXG4gICAgICAgICAgICBpZih3aW5kb3cubG9jYXRpb24uaGFzaCAhPT0gJycpe1xyXG4gICAgICAgICAgICAgICAgX29iai51cGRhdGVQYXJhbXNGcm9tSGFzaCgpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBEaXNwbGF5IGxpc3RcclxuICAgICAgICAgICAgX29iai5kaXNwbGF5TGlzdChfb2JqLmFqYXhDb250YWluZXIsIF9vYmouYWpheFBhdGgsIF9vYmoucGFyYW1zKTtcclxuXHJcbiAgICAgICAgICAgIC8vIE9uIGhhc2ggY2hhbmdlLCB1cGRhdGUgcGFyYW1zLCByZWxvYWQgbGlzdFxyXG4gICAgICAgICAgICAkKHdpbmRvdykub2ZmKCdoYXNoY2hhbmdlLmZvcm0tZnJhZ21lbnQnKS5vbignaGFzaGNoYW5nZScsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgX29iai51cGRhdGVQYXJhbXNGcm9tSGFzaCgpO1xyXG4gICAgICAgICAgICAgICAgX29iai5kaXNwbGF5TGlzdChfb2JqLmFqYXhDb250YWluZXIsIF9vYmouYWpheFBhdGgsIF9vYmoucGFyYW1zKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG5cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gQWpheCBwYWdlciBsaW5rc1xyXG4gICAgICAgICQoJy5wYWdlci5hamF4IGEnKS5vZmYoIFwiY2xpY2tcIiApLm9uKCAnY2xpY2snLCBmdW5jdGlvbihldmVudCl7XHJcblxyXG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuXHJcbiAgICAgICAgICAgIGxldCBwYXJhbXMgPSAkKHRoaXMpLmRhdGEoJ3BhcmFtcycpO1xyXG4gICAgICAgICAgICBsZXQgdG9wID0gX29iai5nZXRUb3BQb3NpdGlvbigkKCcuYWpheC1saXN0LWNvbnRhaW5lcicpKTtcclxuXHJcbiAgICAgICAgICAgIGlmKF9vYmouY2F0ZWdvcnkubGVuZ3RoID4gMCl7XHJcbiAgICAgICAgICAgICAgICBsZXQgY2F0ZWdvcnkgPSBfb2JqLmNhdGVnb3J5LnZhbCgpO1xyXG4gICAgICAgICAgICAgICAgaWYoY2F0ZWdvcnkuaW5kZXhPZignYWxsJykgPT09IC0xKXtcclxuICAgICAgICAgICAgICAgICAgICBwYXJhbXMuY2F0ZWdvcnkgPSAnZmllbGRfY2F0ZWdvcnktLScrY2F0ZWdvcnkucmVwbGFjZSgnLnRlcm0tJywnJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIEFib3J0IGFueSBwb3NzaWJsZSBjdXJyZW50IGFqYXggY2FsbFxyXG4gICAgICAgICAgICBfb2JqLnhoci5hYm9ydCgpO1xyXG5cclxuICAgICAgICAgICAgLy8gU2V0IGhpc3Rvcnkgc3RhdGVcclxuICAgICAgICAgICAgd2luZG93Lmhpc3RvcnkucHVzaFN0YXRlKHtwYXJhbXM6SlNPTi5zdHJpbmdpZnkocGFyYW1zKX0sbnVsbCx3aW5kb3cubG9jYXRpb24pO1xyXG5cclxuICAgICAgICAgICAgLy8gR2V0IHRvcCBvZiBmaWx0ZXJzIGlmIHByZXNlbnRcclxuICAgICAgICAgICAgaWYoX29iai5maWx0ZXJGb3JtLmxlbmd0aCA+IDApe1xyXG4gICAgICAgICAgICAgICAgdG9wID0gX29iai5nZXRUb3BQb3NpdGlvbihfb2JqLmZpbHRlckZvcm0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBBbmltYXRlIHRvIHBvc2l0aW9uXHJcbiAgICAgICAgICAgICQoXCJodG1sLGJvZHlcIikuYW5pbWF0ZShcclxuICAgICAgICAgICAgICAgIHtzY3JvbGxUb3A6IHRvcH0sICc1MDAnKTtcclxuXHJcbiAgICAgICAgICAgIC8vIEZhZGUgb3V0IHdyYXBwZXJcclxuICAgICAgICAgICAgJCgnLmFqYXgtbGlzdC1jb250YWluZXIgLndyYXBwZXInKS5mYWRlT3V0KCBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgLy8gVHJpZ2dlciB0aGUgZGlzcGxheSBvZiB0aGUgbGlzdFxyXG4gICAgICAgICAgICAgICAgX29iai5kaXNwbGF5TGlzdChfb2JqLmFqYXhDb250YWluZXIsIF9vYmouYWpheFBhdGgsIHBhcmFtcyk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuXHJcbiAgICAgICAgICAgIC8qXHJcbiAgICAgICAgICAgICQoJy5hamF4LWxpc3QtY29udGFpbmVyIC53cmFwcGVyJykuZmFkZU91dCggZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5oYXNoID0gJC50cmltKFwiL2NhdGVnb3J5PVwiK3BhcmFtcy5jYXRlZ29yeStcIi9wYWdlZD1cIitwYXJhbXMucGFnZWQpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgKi9cclxuXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgfTtcclxuXHJcblxyXG4gICAgRHJ1cGFsLmJlaGF2aW9ycy5hamF4TGlzdExvYWRpbmcudXBkYXRlUGFyYW1zRnJvbUhhc2ggPSBmdW5jdGlvbiAoKXtcclxuXHJcbiAgICAgICAgbGV0IF9vYmogPSBEcnVwYWwuYmVoYXZpb3JzLmFqYXhMaXN0TG9hZGluZztcclxuICAgICAgICBsZXQgaGFzaCA9IHdpbmRvdy5sb2NhdGlvbi5oYXNoO1xyXG5cclxuICAgICAgICAvLyBTcGxpdCBoYXNoIGludG8gYXJyYXkgb2YgdmFsdWVzXHJcbiAgICAgICAgbGV0IGhhc2hBcnJheSA9IGhhc2guc3Vic3RyaW5nKDIpLnNwbGl0KCcvJyk7XHJcblxyXG4gICAgICAgICQuZWFjaChoYXNoQXJyYXksIGZ1bmN0aW9uKCBpbmRleCwgdmFsdWUgKSB7XHJcbiAgICAgICAgICAgIC8vIEZvciBlYWNoIHZhbHVlIHNwbGl0IGludG8ga2V5ID0+IHZhbHVlIGFycmF5XHJcbiAgICAgICAgICAgIGxldCB2YWx1ZUFycmF5ID0gdmFsdWUuc3BsaXQoJz0nKTtcclxuICAgICAgICAgICAgLy8gQWRkL292ZXJyaWRlIGRlZmF1bHRQYXJhbXMgb2JqZWN0XHJcbiAgICAgICAgICAgIF9vYmoucGFyYW1zW3ZhbHVlQXJyYXlbMF1dID0gdmFsdWVBcnJheVsxXTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICB9O1xyXG5cclxuXHJcbiAgICBEcnVwYWwuYmVoYXZpb3JzLmFqYXhMaXN0TG9hZGluZy51cGRhdGVGaWx0ZXJzID0gZnVuY3Rpb24gKHBhcmFtcyl7XHJcblxyXG4gICAgICAgIGxldCBfb2JqID0gRHJ1cGFsLmJlaGF2aW9ycy5hamF4TGlzdExvYWRpbmc7XHJcblxyXG4gICAgICAgIC8vIEhhbmRsZSBkYXRlIGlmIGV4aXN0c1xyXG4gICAgICAgIGxldCBmcm9tU2VsZWN0ID0gJCggXCIuZmlsdGVyZm9ybSAuZnJvbS1kYXRlXCIgKTtcclxuICAgICAgICBsZXQgdG9TZWxlY3QgPSAkKCBcIi5maWx0ZXJmb3JtIC50by1kYXRlXCIgKTtcclxuXHJcbiAgICAgICAgaWYoZnJvbVNlbGVjdC5sZW5ndGggPiAwICYmIHRvU2VsZWN0Lmxlbmd0aCA+IDApe1xyXG4gICAgICAgICAgICBsZXQgZGF0ZSA9IHBhcmFtcy5kYXRlLnJlcGxhY2UoJ2ZpZWxkX2RhdGVfcmFuZ2UtLScsJycpLnNwbGl0KCcsJyk7XHJcbiAgICAgICAgICAgIGxldCBmcm9tID0gZGF0ZVswXS5zcGxpdCgnLScpO1xyXG4gICAgICAgICAgICBsZXQgdG8gPSBkYXRlWzFdLnNwbGl0KCctJyk7XHJcblxyXG4gICAgICAgICAgICAvLyBVcGRhdGVzIEZpbHRlcnMgVmFsdWUgb24gUGFnZVxyXG4gICAgICAgICAgICBmcm9tU2VsZWN0LnZhbChtb21lbnQoRGF0ZS5wYXJzZShmcm9tWzFdKyctJytmcm9tWzBdKyctJytmcm9tWzJdKSkuZm9ybWF0KCdNTU0gRCwgWVlZWScpKTtcclxuICAgICAgICAgICAgdG9TZWxlY3QudmFsKG1vbWVudChEYXRlLnBhcnNlKHRvWzFdKyctJyt0b1swXSsnLScrdG9bMl0pKS5mb3JtYXQoJ01NTSBELCBZWVlZJykpO1xyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgIC8vIEhhbmRsZSBjYXRlZ29yeSBpZiBleGlzdHNcclxuICAgICAgICBpZihfb2JqLmNhdGVnb3J5Lmxlbmd0aCA+IDApe1xyXG4gICAgICAgICAgICBsZXQgY2F0ZWdvcnk7XHJcblxyXG4gICAgICAgICAgICBpZihwYXJhbXMuY2F0ZWdvcnkgIT09ICdhbGwnKXtcclxuICAgICAgICAgICAgICAgIGNhdGVnb3J5ID0gJy50ZXJtLScrcGFyYW1zLmNhdGVnb3J5LnJlcGxhY2UoJ2ZpZWxkX2NhdGVnb3J5LS0nLCcnKTtcclxuICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICBjYXRlZ29yeSA9ICdhbGwnO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBVcGRhdGVzIEZpbHRlcnMgVmFsdWUgb24gUGFnZVxyXG4gICAgICAgICAgICBfb2JqLmNhdGVnb3J5LnZhbChjYXRlZ29yeSkuYmx1cigpLmRyb3Bkb3duKFwidXBkYXRlXCIpO1xyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgfTtcclxuXHJcblxyXG4gICAgRHJ1cGFsLmJlaGF2aW9ycy5hamF4TGlzdExvYWRpbmcuZGlzcGxheUxpc3QgPSBmdW5jdGlvbiAoICRjb250YWluZXIsICRwYXRoLCAkcGFyYW1zICl7XHJcblxyXG4gICAgICAgIGxldCBfb2JqID0gRHJ1cGFsLmJlaGF2aW9ycy5hamF4TGlzdExvYWRpbmc7XHJcblxyXG4gICAgICAgIC8vIEhhbmRsZSBjbGFzcyBmb3IgbG9hZGluZyBpY29uXHJcbiAgICAgICAgJGNvbnRhaW5lci5odG1sKCcnKS5yZW1vdmVDbGFzcygnbG9hZGVkJyk7XHJcblxyXG4gICAgICAgIC8vIFVwZGF0ZSBGaWx0ZXJzXHJcbiAgICAgICAgX29iai51cGRhdGVGaWx0ZXJzKCRwYXJhbXMpO1xyXG5cclxuICAgICAgICBfb2JqLnhociA9ICQuYWpheCh7XHJcbiAgICAgICAgICAgIHR5cGU6ICdQT1NUJyxcclxuICAgICAgICAgICAgdXJsOiAkcGF0aCsnP3Jlc3BvbnNlX3R5cGU9YWpheCcsXHJcbiAgICAgICAgICAgIGRhdGE6ICRwYXJhbXMsXHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlc3VsdCkge1xyXG5cclxuICAgICAgICAgICAgICAgIGxldCB3cmFwcGVyID0gJCggXCI8ZGl2Lz5cIiwgeyAnY2xhc3MnOiAnd3JhcHBlcid9KTtcclxuICAgICAgICAgICAgICAgIHdyYXBwZXIuaHRtbChyZXN1bHQpO1xyXG4gICAgICAgICAgICAgICAgJGNvbnRhaW5lci5odG1sKHdyYXBwZXIpO1xyXG4gICAgICAgICAgICAgICAgJGNvbnRhaW5lci5hZGRDbGFzcygnbG9hZGVkJyk7XHJcbiAgICAgICAgICAgICAgICBEcnVwYWwuYXR0YWNoQmVoYXZpb3JzKCk7XHJcbiAgICAgICAgICAgICAgICBEcnVwYWwuYmxhenkuaW5pdC5yZXZhbGlkYXRlKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgLypcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCRwYXRoKyc/cmVzcG9uc2VfdHlwZT1hamF4Jyk7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygkcGFyYW1zKTtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3VsdCk7XHJcbiAgICAgICAgICAgICAgICAqL1xyXG5cclxuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICB9O1xyXG5cclxuXHJcblxyXG4gICAgRHJ1cGFsLmJlaGF2aW9ycy5hamF4TGlzdExvYWRpbmcuZ2V0VG9wUG9zaXRpb24gPSBmdW5jdGlvbigkZWxlbSl7XHJcblxyXG4gICAgICAgIHJldHVybiAkZWxlbS5vZmZzZXQoKS50b3AgLSAxMDA7XHJcbiAgICB9O1xyXG5cclxuXHJcblxyXG59KGpRdWVyeSwgRHJ1cGFsKSk7Il19
