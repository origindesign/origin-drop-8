"use strict";!function(s,e){e.behaviors.listing={},e.behaviors.listing.filterArr={},e.behaviors.listing.isotope="",e.behaviors.listing.isoContainer=s(".isotope"),e.behaviors.listing.isoGrid=e.behaviors.listing.isoContainer.find(".isoGrid"),e.behaviors.listing.linkFilter=e.behaviors.listing.isoContainer.find(".link-filter"),e.behaviors.listing.selectFilter=e.behaviors.listing.isoContainer.find(".filter-isotope select"),e.behaviors.listing.attach=function(i){var o=e.behaviors.listing;s(".listing.isotope",i).once("listing").each(function(){o.isoContainer.each(function(){o.isoGrid.append('<div class="iso-gutter"></div>'),o.isotope=o.isoGrid.isotope({masonry:{columnWidth:".iso-item",gutter:".iso-gutter"},itemSelector:".iso-item",percentPosition:!0}),o.isotope.imagesLoaded(e.behaviors.listing.isotope,function(){o.isotope.isotope("layout")}),o.selectFilter.on("change",function(){var i=s(this),t=i.val(),i=i.attr("data-filter-group");"all"!==t?o.filterArr[i]=t:delete o.filterArr[i],o.onChangeFilters()}),o.linkFilter.on("click",function(i){i.preventDefault(),i.stopPropagation();var t=s(this),e=t.attr("data-filter"),i=t.attr("data-filter-group");t.addClass("active").parent("li").siblings().find("a").removeClass("active"),"all"!==e?o.filterArr[i]=e:delete o.filterArr[i],o.onChangeFilters()})}),""!==window.location.hash&&o.updateList(),s(window).off("hashchange.form-fragment").on("hashchange",function(){o.updateList()})})},e.behaviors.listing.onChangeFilters=function(){var i=e.behaviors.listing;window.location.hash=i.createHashFilters(i.filterArr)},e.behaviors.listing.filterList=function(){var i=e.behaviors.listing,t=i.concatValues(i.filterArr);i.isotope.isotope({filter:t}),i.isotope.data("isotope").filteredItems.length?s(".isoGrid .no-results").hide():s(".isoGrid .no-results").fadeIn()},e.behaviors.listing.updateList=function(){var o,i,t;"#/all"!==window.location.hash?(o=window.location.hash.substr(2).split("&"),Object.keys(o).forEach(function(i){var t=o[i].split("="),e=t[0],i=t[1],t=s('.link-filter[data-filter-group="'+e+'"][data-filter="'+i+'"]'),e=s('.filter-isotope .filter-list[data-filter-group="'+e+'"]');0<t.length&&t.click(),0<e.length&&e.val(i).change().blur().dropdown("update")})):(i=s(".filter-isotope ul"),t=s(".filter-isotope select.filter-list"),0<i.length&&i.each(function(){s(this).find('.link-filter[data-filter="all"]').click()}),0<t.length&&t.each(function(){s(this).val("all").change().blur().dropdown("update")})),e.behaviors.listing.filterList()},e.behaviors.listing.concatValues=function(t){var e="";return Object.keys(t).forEach(function(i){e+=t[i]}),e},e.behaviors.listing.createHashFilters=function(i){var t="#/";return t+=0!==Object.keys(i).length?s.param(i):"all"}}(jQuery,Drupal);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImlzb3RvcGUuanMiXSwibmFtZXMiOlsiJCIsIkRydXBhbCIsImJlaGF2aW9ycyIsImxpc3RpbmciLCJmaWx0ZXJBcnIiLCJpc29Db250YWluZXIiLCJpc290b3BlIiwiZmluZCIsImxpbmtGaWx0ZXIiLCJhdHRhY2giLCJjb250ZXh0IiwiX29iaiIsIm9uY2UiLCJlYWNoIiwiaXNvR3JpZCIsImFwcGVuZCIsIm1hc29ucnkiLCJjb2x1bW5XaWR0aCIsImd1dHRlciIsInBlcmNlbnRQb3NpdGlvbiIsImltYWdlc0xvYWRlZCIsImZpbHRlciIsInNlbGVjdEZpbHRlciIsIm9uIiwidGhhdCIsInRoaXMiLCJ2YWwiLCJmaWx0ZXJHcm91cCIsIm9uQ2hhbmdlRmlsdGVycyIsImF0dHIiLCJldmVudCIsInByZXZlbnREZWZhdWx0Iiwic3RvcFByb3BhZ2F0aW9uIiwicGFyZW50Iiwic2libGluZ3MiLCJyZW1vdmVDbGFzcyIsIndpbmRvdyIsImxvY2F0aW9uIiwiaGFzaCIsInVwZGF0ZUxpc3QiLCJvZmYiLCJmaWx0ZXJMaXN0IiwiZmlsdGVySXRlbSIsImZpbHRlclZhbHVlIiwiY29uY2F0VmFsdWVzIiwiZmlsdGVyU2VsZWN0IiwidGVybSIsImRhdGEiLCJmaWx0ZXJlZEl0ZW1zIiwibGVuZ3RoIiwiaGlkZSIsIml0ZW1Db250YWluZXJzIiwiZmFkZUluIiwic2VsZWN0Q29udGFpbmVycyIsImhhc2hBcnIiLCJzdWJzdHIiLCJzcGxpdCIsIk9iamVjdCIsImtleXMiLCJmb3JFYWNoIiwicHJvcCIsImFyZ0FyciIsImdyb3VwIiwiY2xpY2siLCJjaGFuZ2UiLCJibHVyIiwiZHJvcGRvd24iLCJvYmoiLCJyZXN1bHQiLCJjcmVhdGVIYXNoRmlsdGVycyIsInBhcmFtIiwialF1ZXJ5Il0sIm1hcHBpbmdzIjoiY0FBQyxTQUF1QkEsRUFBR0MsR0FJdkJBLEVBQU9DLFVBQVVDLFFBQVUsR0FBM0JGLEVBQU9DLFVBQVVDLFFBQVVDLFVBQTNCLEdBQ0FILEVBQU9DLFVB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RUFBQWxCLEVBQUFJLFFBaENnQkosRUFBYW5CLElBQUlvQixHQUFNa0IsU0FBU0MsT0FBT0MsU0FBUyxjQStDOUNsRSxFQUFWQSxFQUFBLHNCQUNDcUQsRUFBQXJELEVBQUEsc0NBRUosRUFBQW1ELEVBQUFGLFFBeENPRSxFQUFldEMsS0FBSyxXQTBDNUJiLEVBQUF5QixNQUFBbEIsS0FBQSxtQ0FYSndELFVBekJzQyxFQUExQlYsRUFBaUJKLFFBQ2pCSSxFQUFpQnhDLEtBQUssV0FDbEJiLEVBQUV5QixNQUFNQyxJQUFJLE9BQU9zQyxTQUFTQyxPQUFPQyxTQUFTLGFBUXhEakUsRUFBT0MsVUFBVUMsUUFBUXNDLGNBTTdCeEMsRUFBT0MsVUFBVUMsUUFBUXlDLGFBQWUsU0FBU3VCLEdBQzdDLElBQUlDLEVBQVMsR0FJYixPQUhBWCxPQUFPQyxLQUFLUyxHQUFLUixRQUFRLFNBQVNDLEdBQzlCUSxHQUFVRCxFQUFJUCxLQUVYUSxHQUlYbkUsRUFBT0MsVUFBVUMsUUFBUWtFLGtCQUFvQixTQUFTRixHQUVsRCxJQUFJQyxFQUFTLEtBU2IsT0FMSUEsR0FEUyxJQUZGWCxPQUFPQyxLQUFLUyxHQUFLbEIsT0FHZGpELEVBQUVzRSxNQUFNSCxHQUVSLE9Bck5yQixDQStOQ0ksT0FBUXRFIiwiZmlsZSI6Imlzb3RvcGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gbGlzdGluZ1NjcmlwdCgkLCBEcnVwYWwpIHtcblxuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIERydXBhbC5iZWhhdmlvcnMubGlzdGluZyA9IHt9O1xuICAgIERydXBhbC5iZWhhdmlvcnMubGlzdGluZy5maWx0ZXJBcnIgPSB7fTsgLy8gT2JqZWN0LyBhcnJheSBXaGVyZSB3ZSBzdG9yZSBmaWx0ZXJzIGFuZCB0aGVpciBncm91cFxuICAgIERydXBhbC5iZWhhdmlvcnMubGlzdGluZy5pc290b3BlID0gJyc7IC8vIElzb3RvcGUgZWxlbWVudCBjcmVhdGVkIGJ5IGxpYnJhcnlcbiAgICBEcnVwYWwuYmVoYXZpb3JzLmxpc3RpbmcuaXNvQ29udGFpbmVyID0gJChcIi5pc290b3BlXCIpO1xuICAgIERydXBhbC5iZWhhdmlvcnMubGlzdGluZy5pc29HcmlkID0gRHJ1cGFsLmJlaGF2aW9ycy5saXN0aW5nLmlzb0NvbnRhaW5lci5maW5kKFwiLmlzb0dyaWRcIik7XG4gICAgRHJ1cGFsLmJlaGF2aW9ycy5saXN0aW5nLmxpbmtGaWx0ZXIgPSBEcnVwYWwuYmVoYXZpb3JzLmxpc3RpbmcuaXNvQ29udGFpbmVyLmZpbmQoXCIubGluay1maWx0ZXJcIik7IC8vIFdoZW4gZmlsdGVycyBhcmUgYnV0dG9uIGxpbmsgbGFiZWxcbiAgICBEcnVwYWwuYmVoYXZpb3JzLmxpc3Rpbmcuc2VsZWN0RmlsdGVyID0gRHJ1cGFsLmJlaGF2aW9ycy5saXN0aW5nLmlzb0NvbnRhaW5lci5maW5kKFwiLmZpbHRlci1pc290b3BlIHNlbGVjdFwiKTsgLy8gV2hlbiBmaWx0ZXJzIGFyZSBzZWxlY3QgZHJvcGRvd25cblxuXG4gICAgRHJ1cGFsLmJlaGF2aW9ycy5saXN0aW5nLmF0dGFjaCA9IGZ1bmN0aW9uIChjb250ZXh0KSB7XG5cbiAgICAgICAgbGV0IF9vYmogPSBEcnVwYWwuYmVoYXZpb3JzLmxpc3Rpbmc7XG5cbiAgICAgICAgJCgnLmxpc3RpbmcuaXNvdG9wZScsIGNvbnRleHQpLm9uY2UoJ2xpc3RpbmcnKS5lYWNoKGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgX29iai5pc29Db250YWluZXIuZWFjaChmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICAvLyBBZGRpbmcgZ3V0dGVyIGVsZW1lbnQgaW4gdGhlIGlzbyBncmlkXG4gICAgICAgICAgICAgICAgX29iai5pc29HcmlkLmFwcGVuZCgnPGRpdiBjbGFzcz1cImlzby1ndXR0ZXJcIj48L2Rpdj4nKTtcblxuICAgICAgICAgICAgICAgIC8vIFNldHRpbmcgdXAgSXNvdG9wZSBsaXN0aW5nXG4gICAgICAgICAgICAgICAgX29iai5pc290b3BlID0gX29iai5pc29HcmlkLmlzb3RvcGUoe1xuICAgICAgICAgICAgICAgICAgICBtYXNvbnJ5OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2x1bW5XaWR0aDogJy5pc28taXRlbScsXG4gICAgICAgICAgICAgICAgICAgICAgICBndXR0ZXI6ICcuaXNvLWd1dHRlcidcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgaXRlbVNlbGVjdG9yOiAnLmlzby1pdGVtJyxcbiAgICAgICAgICAgICAgICAgICAgcGVyY2VudFBvc2l0aW9uOiB0cnVlXG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAvLyBMYXlvdXQgbGlzdCBvbmNlIGltYWdlcyBhcmUgbG9hZGVkXG4gICAgICAgICAgICAgICAgX29iai5pc290b3BlLmltYWdlc0xvYWRlZChEcnVwYWwuYmVoYXZpb3JzLmxpc3RpbmcuaXNvdG9wZSwgZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgX29iai5pc290b3BlLmlzb3RvcGUoJ2xheW91dCcpO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgLy8gQ2hhbmdlIGZpbHRlciBzZWxlY3RcbiAgICAgICAgICAgICAgICBfb2JqLnNlbGVjdEZpbHRlci5vbignY2hhbmdlJywgZnVuY3Rpb24oKXtcblxuICAgICAgICAgICAgICAgICAgICBsZXQgdGhhdCA9ICQodGhpcyk7XG4gICAgICAgICAgICAgICAgICAgIGxldCBmaWx0ZXIgPSB0aGF0LnZhbCgpO1xuICAgICAgICAgICAgICAgICAgICBsZXQgZmlsdGVyR3JvdXAgPSB0aGF0LmF0dHIoJ2RhdGEtZmlsdGVyLWdyb3VwJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGZpbHRlciAhPT0gJ2FsbCcpe1xuICAgICAgICAgICAgICAgICAgICAgICAgX29iai5maWx0ZXJBcnJbZmlsdGVyR3JvdXBdID0gZmlsdGVyO1xuICAgICAgICAgICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBfb2JqLmZpbHRlckFycltmaWx0ZXJHcm91cF07XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBfb2JqLm9uQ2hhbmdlRmlsdGVycygpO1xuXG4gICAgICAgICAgICAgICAgfSk7XG5cblxuICAgICAgICAgICAgICAgIC8vIENsaWNrIG9uIGZpbHRlciBsaW5rIG9uIGlzb3RvcGVcbiAgICAgICAgICAgICAgICBfb2JqLmxpbmtGaWx0ZXIub24oJ2NsaWNrJywgZnVuY3Rpb24oZXZlbnQpIHtcblxuICAgICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcblxuICAgICAgICAgICAgICAgICAgICBsZXQgdGhhdCA9ICQodGhpcyk7XG4gICAgICAgICAgICAgICAgICAgIGxldCBmaWx0ZXIgPSB0aGF0LmF0dHIoJ2RhdGEtZmlsdGVyJyk7XG4gICAgICAgICAgICAgICAgICAgIGxldCBmaWx0ZXJHcm91cCA9IHRoYXQuYXR0cignZGF0YS1maWx0ZXItZ3JvdXAnKTtcblxuICAgICAgICAgICAgICAgICAgICB0aGF0LmFkZENsYXNzKFwiYWN0aXZlXCIpLnBhcmVudCgnbGknKS5zaWJsaW5ncygpLmZpbmQoJ2EnKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGZpbHRlciAhPT0gJ2FsbCcpe1xuICAgICAgICAgICAgICAgICAgICAgICAgX29iai5maWx0ZXJBcnJbZmlsdGVyR3JvdXBdID0gZmlsdGVyO1xuICAgICAgICAgICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBfb2JqLmZpbHRlckFycltmaWx0ZXJHcm91cF07XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBfb2JqLm9uQ2hhbmdlRmlsdGVycygpO1xuXG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIH0pO1xuXG5cbiAgICAgICAgICAgIC8vIElmIGhhc2ggaGFzIGJlZW4gcHJvdmlkZWQsIHNldCBmaWx0ZXJcbiAgICAgICAgICAgIGlmKHdpbmRvdy5sb2NhdGlvbi5oYXNoICE9PSAnJyl7XG4gICAgICAgICAgICAgICAgX29iai51cGRhdGVMaXN0KCk7XG4gICAgICAgICAgICB9XG5cblxuICAgICAgICAgICAgLy8gT24gaGFzaCBjaGFuZ2UsIGNoYW5nZSBmaWx0ZXJzIChkaXNhYmxlIGZvcm0uanMgZXZlbnQgZmlyc3QgYXMgaXQgY29uZmxpY3RzIHdpdGggIylcbiAgICAgICAgICAgICQod2luZG93KS5vZmYoJ2hhc2hjaGFuZ2UuZm9ybS1mcmFnbWVudCcpLm9uKCdoYXNoY2hhbmdlJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgX29iai51cGRhdGVMaXN0KCk7XG4gICAgICAgICAgICB9KTtcblxuXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIE1hdGNoIGhlaWdodHMgR3JpZCBsYXlvdXRcbiAgICAgICAgLypcbiAgICAgICAgaWYoIURydXBhbC5iZWhhdmlvcnMucmVzaXplci5pc01vYmlsZSl7XG4gICAgICAgICAgICAkKCcubm9kZS12aWV3LWdyaWQuaXNvLWl0ZW0gLmNvcHknKS5tYXRjaEhlaWdodCh7YnlSb3c6IGZhbHNlfSk7XG4gICAgICAgIH1lbHNle1xuICAgICAgICAgICAgJCgnLm5vZGUtdmlldy1ncmlkLmlzby1pdGVtIC5jb3B5JykubWF0Y2hIZWlnaHQoJ3JlbW92ZScpO1xuICAgICAgICB9XG4gICAgICAgICovXG5cbiAgICB9O1xuXG5cblxuXG5cblxuICAgIERydXBhbC5iZWhhdmlvcnMubGlzdGluZy5vbkNoYW5nZUZpbHRlcnMgPSBmdW5jdGlvbigpe1xuXG4gICAgICAgIGxldCBfb2JqID0gRHJ1cGFsLmJlaGF2aW9ycy5saXN0aW5nO1xuXG4gICAgICAgIC8vIFNldCBIYXNoIHRoYXQgd2lsbCB0cmlnZ2VyIHVwZGF0ZUxpc3QgbWV0aG9kXG4gICAgICAgIHdpbmRvdy5sb2NhdGlvbi5oYXNoID0gX29iai5jcmVhdGVIYXNoRmlsdGVycyhfb2JqLmZpbHRlckFycik7XG5cbiAgICAgICAgLy8gRHJ1cGFsLmF0dGFjaEJlaGF2aW9ycygpO1xuXG4gICAgfTtcblxuXG5cbiAgICAvLyBGaWx0ZXIgbGlzdCBiYXNlZCBvbiBmaWx0ZXIgdmFsdWVcbiAgICBEcnVwYWwuYmVoYXZpb3JzLmxpc3RpbmcuZmlsdGVyTGlzdCA9IGZ1bmN0aW9uKCl7XG5cbiAgICAgICAgbGV0IF9vYmogPSBEcnVwYWwuYmVoYXZpb3JzLmxpc3Rpbmc7XG4gICAgICAgIGxldCBmaWx0ZXJWYWx1ZSA9IF9vYmouY29uY2F0VmFsdWVzKF9vYmouZmlsdGVyQXJyKTtcblxuICAgICAgICAvLyBVcGRhdGUgSXNvdG9wZVxuICAgICAgICBfb2JqLmlzb3RvcGUuaXNvdG9wZSh7IGZpbHRlcjogZmlsdGVyVmFsdWUgfSk7XG5cbiAgICAgICAgLy8gTm8gcmVzdWx0c1xuICAgICAgICBpZiAoIV9vYmouaXNvdG9wZS5kYXRhKCdpc290b3BlJykuZmlsdGVyZWRJdGVtcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICQoJy5pc29HcmlkIC5uby1yZXN1bHRzJykuZmFkZUluKCk7XG4gICAgICAgIH1lbHNle1xuICAgICAgICAgICAgJCgnLmlzb0dyaWQgLm5vLXJlc3VsdHMnKS5oaWRlKCk7XG4gICAgICAgIH1cblxuICAgIH07XG5cblxuXG4gICAgLy8gVXBkYXRlIGFjdGl2ZSBsaW5rIGFuZCBzZWxlY3QgZnJvbSBoYXNoXG4gICAgRHJ1cGFsLmJlaGF2aW9ycy5saXN0aW5nLnVwZGF0ZUxpc3QgPSBmdW5jdGlvbigpe1xuXG4gICAgICAgIGlmKHdpbmRvdy5sb2NhdGlvbi5oYXNoICE9PSAnIy9hbGwnKSB7XG5cbiAgICAgICAgICAgIGxldCBoYXNoQXJyID0gd2luZG93LmxvY2F0aW9uLmhhc2guc3Vic3RyKDIpLnNwbGl0KFwiJlwiKTtcblxuICAgICAgICAgICAgT2JqZWN0LmtleXMoaGFzaEFycikuZm9yRWFjaChmdW5jdGlvbiAocHJvcCkge1xuICAgICAgICAgICAgICAgIGxldCBhcmdBcnIgPSBoYXNoQXJyW3Byb3BdLnNwbGl0KFwiPVwiKTtcbiAgICAgICAgICAgICAgICBsZXQgZ3JvdXAgPSBhcmdBcnJbMF07XG4gICAgICAgICAgICAgICAgbGV0IHRlcm0gPSBhcmdBcnJbMV07XG5cbiAgICAgICAgICAgICAgICBsZXQgZmlsdGVySXRlbSA9ICQoJy5saW5rLWZpbHRlcltkYXRhLWZpbHRlci1ncm91cD1cIicgKyBncm91cCArICdcIl1bZGF0YS1maWx0ZXI9XCInICsgdGVybSArICdcIl0nKTtcbiAgICAgICAgICAgICAgICBsZXQgZmlsdGVyU2VsZWN0ID0gJCgnLmZpbHRlci1pc290b3BlIC5maWx0ZXItbGlzdFtkYXRhLWZpbHRlci1ncm91cD1cIicgKyBncm91cCArICdcIl0nKTtcblxuICAgICAgICAgICAgICAgIGlmKGZpbHRlckl0ZW0ubGVuZ3RoID4gMCl7XG4gICAgICAgICAgICAgICAgICAgIGZpbHRlckl0ZW0uY2xpY2soKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYoZmlsdGVyU2VsZWN0Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgZmlsdGVyU2VsZWN0LnZhbCh0ZXJtKS5jaGFuZ2UoKS5ibHVyKCkuZHJvcGRvd24oXCJ1cGRhdGVcIik7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfWVsc2Uge1xuXG4gICAgICAgICAgICBsZXQgaXRlbUNvbnRhaW5lcnMgPSAkKCcuZmlsdGVyLWlzb3RvcGUgdWwnKTtcbiAgICAgICAgICAgIGxldCBzZWxlY3RDb250YWluZXJzID0gJCgnLmZpbHRlci1pc290b3BlIHNlbGVjdC5maWx0ZXItbGlzdCcpO1xuXG4gICAgICAgICAgICBpZiAoaXRlbUNvbnRhaW5lcnMubGVuZ3RoID4gMCl7XG4gICAgICAgICAgICAgICAgaXRlbUNvbnRhaW5lcnMuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBmaWx0ZXJJdGVtID0gJCh0aGlzKS5maW5kKCcubGluay1maWx0ZXJbZGF0YS1maWx0ZXI9XCJhbGxcIl0nKTtcbiAgICAgICAgICAgICAgICAgICAgZmlsdGVySXRlbS5jbGljaygpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoc2VsZWN0Q29udGFpbmVycy5sZW5ndGggPiAwKXtcbiAgICAgICAgICAgICAgICBzZWxlY3RDb250YWluZXJzLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnZhbCgnYWxsJykuY2hhbmdlKCkuYmx1cigpLmRyb3Bkb3duKFwidXBkYXRlXCIpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEZpbHRlciB0aGUgbGlzdCB3aXRoIElzb3RvcGVcbiAgICAgICAgRHJ1cGFsLmJlaGF2aW9ycy5saXN0aW5nLmZpbHRlckxpc3QoKTtcblxuICAgIH07XG5cblxuXG4gICAgRHJ1cGFsLmJlaGF2aW9ycy5saXN0aW5nLmNvbmNhdFZhbHVlcyA9IGZ1bmN0aW9uKG9iail7XG4gICAgICAgIGxldCByZXN1bHQgPSAnJztcbiAgICAgICAgT2JqZWN0LmtleXMob2JqKS5mb3JFYWNoKGZ1bmN0aW9uKHByb3ApIHtcbiAgICAgICAgICAgIHJlc3VsdCArPSBvYmpbcHJvcF07XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH07XG5cblxuICAgIERydXBhbC5iZWhhdmlvcnMubGlzdGluZy5jcmVhdGVIYXNoRmlsdGVycyA9IGZ1bmN0aW9uKG9iail7XG5cbiAgICAgICAgbGV0IHJlc3VsdCA9ICcjLyc7XG4gICAgICAgIGxldCBzaXplID0gT2JqZWN0LmtleXMob2JqKS5sZW5ndGg7XG5cbiAgICAgICAgaWYgKHNpemUgIT09IDApe1xuICAgICAgICAgICAgcmVzdWx0ICs9ICQucGFyYW0ob2JqKTtcbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICByZXN1bHQgKz0gJ2FsbCc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuXG4gICAgfTtcblxuXG5cblxufShqUXVlcnksIERydXBhbCkpO1xuIl19
