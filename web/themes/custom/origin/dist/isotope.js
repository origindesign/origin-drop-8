"use strict";!function(s,e){e.behaviors.listing={},e.behaviors.listing.filterArr={},e.behaviors.listing.isotope="",e.behaviors.listing.isoContainer=s(".isotope"),e.behaviors.listing.isoGrid=e.behaviors.listing.isoContainer.find(".isoGrid"),e.behaviors.listing.linkFilter=e.behaviors.listing.isoContainer.find(".link-filter"),e.behaviors.listing.selectFilter=e.behaviors.listing.isoContainer.find(".filter-isotope select"),e.behaviors.listing.attach=function(i){var o=e.behaviors.listing;s(".listing.isotope",i).once("listing").each(function(){o.isoContainer.each(function(){o.isoGrid.append('<div class="iso-gutter"></div>'),o.isotope=o.isoGrid.isotope({masonry:{columnWidth:".iso-item",gutter:".iso-gutter"},itemSelector:".iso-item",percentPosition:!0}),o.isotope.imagesLoaded(e.behaviors.listing.isotope,function(){o.isotope.isotope("layout")}),o.selectFilter.on("change",function(){var i=s(this),t=i.val(),i=i.attr("data-filter-group");"all"!==t?o.filterArr[i]=t:delete o.filterArr[i],o.onChangeFilters()}),o.linkFilter.on("click",function(i){i.preventDefault(),i.stopPropagation();var t=s(this),e=t.attr("data-filter"),i=t.attr("data-filter-group");t.addClass("active").parent("li").siblings().find("a").removeClass("active"),"all"!==e?o.filterArr[i]=e:delete o.filterArr[i],o.onChangeFilters()})}),""!==window.location.hash&&o.updateList(),s(window).off("hashchange.form-fragment").on("hashchange",function(){o.updateList()})})},e.behaviors.listing.onChangeFilters=function(){var i=e.behaviors.listing;window.location.hash=i.createHashFilters(i.filterArr)},e.behaviors.listing.filterList=function(){var i=e.behaviors.listing,t=i.concatValues(i.filterArr);i.isotope.isotope({filter:t}).on("layoutComplete",function(){}),i.isotope.data("isotope").filteredItems.length?s(".isoGrid .no-results").hide():s(".isoGrid .no-results").fadeIn()},e.behaviors.listing.updateList=function(){var o,i,t;"#/all"!==window.location.hash?(o=window.location.hash.substr(2).split("&"),Object.keys(o).forEach(function(i){var t=o[i].split("="),e=t[0],i=t[1],t=s('.link-filter[data-filter-group="'+e+'"][data-filter="'+i+'"]'),e=s('.filter-isotope .filter-list[data-filter-group="'+e+'"]');0<t.length&&t.click(),0<e.length&&e.val(i).change().blur().dropdown("update")})):(i=s(".filter-isotope ul"),t=s(".filter-isotope select.filter-list"),0<i.length&&i.each(function(){s(this).find('.link-filter[data-filter="all"]').click()}),0<t.length&&t.each(function(){s(this).val("all").change().blur().dropdown("update")})),e.behaviors.listing.filterList()},e.behaviors.listing.concatValues=function(t){var e="";return Object.keys(t).forEach(function(i){e+=t[i]}),e},e.behaviors.listing.createHashFilters=function(i){var t="#/";return t+=0!==Object.keys(i).length?s.param(i):"all"}}(jQuery,Drupal);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImlzb3RvcGUuanMiXSwibmFtZXMiOlsiJCIsIkRydXBhbCIsImJlaGF2aW9ycyIsImxpc3RpbmciLCJmaWx0ZXJBcnIiLCJpc29Db250YWluZXIiLCJpc290b3BlIiwiZmluZCIsImxpbmtGaWx0ZXIiLCJhdHRhY2giLCJjb250ZXh0IiwiX29iaiIsIm9uY2UiLCJlYWNoIiwiaXNvR3JpZCIsImFwcGVuZCIsIm1hc29ucnkiLCJjb2x1bW5XaWR0aCIsImd1dHRlciIsInBlcmNlbnRQb3NpdGlvbiIsImltYWdlc0xvYWRlZCIsImZpbHRlciIsInNlbGVjdEZpbHRlciIsIm9uIiwidGhhdCIsInRoaXMiLCJ2YWwiLCJmaWx0ZXJHcm91cCIsIm9uQ2hhbmdlRmlsdGVycyIsImF0dHIiLCJldmVudCIsInByZXZlbnREZWZhdWx0Iiwic3RvcFByb3BhZ2F0aW9uIiwicGFyZW50Iiwic2libGluZ3MiLCJyZW1vdmVDbGFzcyIsIndpbmRvdyIsImxvY2F0aW9uIiwiaGFzaCIsInVwZGF0ZUxpc3QiLCJvZmYiLCJjcmVhdGVIYXNoRmlsdGVycyIsImZpbHRlclNlbGVjdCIsImZpbHRlckxpc3QiLCJmaWx0ZXJJdGVtIiwibGVuZ3RoIiwiY29uY2F0VmFsdWVzIiwiZmlsdGVyVmFsdWUiLCJjaGFuZ2UiLCJzZWxlY3RDb250YWluZXJzIiwiZGF0YSIsImZpbHRlcmVkSXRlbXMiLCJpdGVtQ29udGFpbmVycyIsImhpZGUiLCJmYWRlSW4iLCJoYXNoQXJyIiwic3Vic3RyIiwic3BsaXQiLCJwcm9wIiwiYXJnQXJyIiwiZ3JvdXAiLCJ0ZXJtIiwiY2xpY2siLCJibHVyIiwiZHJvcGRvd24iLCJyZXN1bHQiLCJvYmoiLCJPYmplY3QiLCJrZXlzIiwiZm9yRWFjaCIsInBhcmFtIiwialF1ZXJ5Il0sIm1hcHBpbmdzIjoiY0FBQyxTQUF1QkEsRUFBR0MsR0FJdkJBLEVBQU9DLFVBQVVDLFFBQVUsR0FBM0JGLEVBQU9DLFVBQVVDLFFBQVVDLFVBQTNCLEdBQ0FILEVBQU9DLFVB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UUFMSkQsRUFBQWtCLFFBU3lCckIsRUFBUnRDLEVBQVFzQyxRQUVSQyxFQUFiaEIsSUFBQW1DLEdBQUFiLFNBQUFlLE9BQUFDLFNBQUEsY0FNY1osRUFBVnBELEVBQUEsc0JBQ0hpRCxFQUFBakQsRUFBQSxzQ0FFRCxFQUFPaUUsRUFBUHBCLFFBWEpPLEVBQUF2QyxLQUFBLFdBaE5KYixFQUFBeUIsTUFBQWxCLEtBQUEsbUNBbUwrQnVELFVBSVcsRUFBMUJiLEVBQWlCSixRQUNqQkksRUFBaUJwQyxLQUFLLFdBQ2xCYixFQUFFeUIsTUFBTUMsSUFBSSxPQUFPc0IsU0FBU2UsT0FBT0MsU0FBUyxhQVF4RC9ELEVBQU9DLFVBQVVDLFFBQVF3QyxjQU03QjFDLEVBQU9DLFVBQVVDLFFBQVEyQyxhQUFlLFNBQVVvQixHQUM5QyxJQUFJRCxFQUFTLEdBSWIsT0FIQUUsT0FBT0MsS0FBS0YsR0FBS0csUUFBUSxTQUFTWCxHQUM5Qk8sR0FBVUMsRUFBS1IsS0FFWk8sR0FJWGhFLEVBQU9DLFVBQVVDLFFBQVFzQyxrQkFBb0IsU0FBVXlCLEdBRW5ELElBQUlELEVBQVMsS0FTYixPQUxJQSxHQURTLElBRkZFLE9BQU9DLEtBQUtGLEdBQUtyQixPQUdkN0MsRUFBRXNFLE1BQU9KLEdBRVQsT0F4TnJCLENBa09DSyxPQUFRdEUiLCJmaWxlIjoiaXNvdG9wZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBsaXN0aW5nU2NyaXB0KCQsIERydXBhbCkge1xuXG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgRHJ1cGFsLmJlaGF2aW9ycy5saXN0aW5nID0ge307XG4gICAgRHJ1cGFsLmJlaGF2aW9ycy5saXN0aW5nLmZpbHRlckFyciA9IHt9OyAvLyBPYmplY3QvIGFycmF5IFdoZXJlIHdlIHN0b3JlIGZpbHRlcnMgYW5kIHRoZWlyIGdyb3VwXG4gICAgRHJ1cGFsLmJlaGF2aW9ycy5saXN0aW5nLmlzb3RvcGUgPSAnJzsgLy8gSXNvdG9wZSBlbGVtZW50IGNyZWF0ZWQgYnkgbGlicmFyeVxuICAgIERydXBhbC5iZWhhdmlvcnMubGlzdGluZy5pc29Db250YWluZXIgPSAkKFwiLmlzb3RvcGVcIik7XG4gICAgRHJ1cGFsLmJlaGF2aW9ycy5saXN0aW5nLmlzb0dyaWQgPSBEcnVwYWwuYmVoYXZpb3JzLmxpc3RpbmcuaXNvQ29udGFpbmVyLmZpbmQoXCIuaXNvR3JpZFwiKTtcbiAgICBEcnVwYWwuYmVoYXZpb3JzLmxpc3RpbmcubGlua0ZpbHRlciA9IERydXBhbC5iZWhhdmlvcnMubGlzdGluZy5pc29Db250YWluZXIuZmluZChcIi5saW5rLWZpbHRlclwiKTsgLy8gV2hlbiBmaWx0ZXJzIGFyZSBidXR0b24gbGluayBsYWJlbFxuICAgIERydXBhbC5iZWhhdmlvcnMubGlzdGluZy5zZWxlY3RGaWx0ZXIgPSBEcnVwYWwuYmVoYXZpb3JzLmxpc3RpbmcuaXNvQ29udGFpbmVyLmZpbmQoXCIuZmlsdGVyLWlzb3RvcGUgc2VsZWN0XCIpOyAvLyBXaGVuIGZpbHRlcnMgYXJlIHNlbGVjdCBkcm9wZG93blxuXG5cbiAgICBEcnVwYWwuYmVoYXZpb3JzLmxpc3RpbmcuYXR0YWNoICA9IGZ1bmN0aW9uIChjb250ZXh0KSB7XG5cbiAgICAgICAgbGV0IF9vYmogPSBEcnVwYWwuYmVoYXZpb3JzLmxpc3Rpbmc7XG5cbiAgICAgICAgJCgnLmxpc3RpbmcuaXNvdG9wZScsIGNvbnRleHQpLm9uY2UoJ2xpc3RpbmcnKS5lYWNoKGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgX29iai5pc29Db250YWluZXIuZWFjaChmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICAvLyBBZGRpbmcgZ3V0dGVyIGVsZW1lbnQgaW4gdGhlIGlzbyBncmlkXG4gICAgICAgICAgICAgICAgX29iai5pc29HcmlkLmFwcGVuZCgnPGRpdiBjbGFzcz1cImlzby1ndXR0ZXJcIj48L2Rpdj4nKTtcblxuICAgICAgICAgICAgICAgIC8vIFNldHRpbmcgdXAgSXNvdG9wZSBsaXN0aW5nXG4gICAgICAgICAgICAgICAgX29iai5pc290b3BlID0gX29iai5pc29HcmlkLmlzb3RvcGUoe1xuICAgICAgICAgICAgICAgICAgICBtYXNvbnJ5OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2x1bW5XaWR0aDogJy5pc28taXRlbScsXG4gICAgICAgICAgICAgICAgICAgICAgICBndXR0ZXI6ICcuaXNvLWd1dHRlcidcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgaXRlbVNlbGVjdG9yOiAnLmlzby1pdGVtJyxcbiAgICAgICAgICAgICAgICAgICAgcGVyY2VudFBvc2l0aW9uOiB0cnVlXG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAvLyBMYXlvdXQgbGlzdCBvbmNlIGltYWdlcyBhcmUgbG9hZGVkXG4gICAgICAgICAgICAgICAgX29iai5pc290b3BlLmltYWdlc0xvYWRlZChEcnVwYWwuYmVoYXZpb3JzLmxpc3RpbmcuaXNvdG9wZSwgZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgX29iai5pc290b3BlLmlzb3RvcGUoJ2xheW91dCcpO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgLy8gQ2hhbmdlIGZpbHRlciBzZWxlY3RcbiAgICAgICAgICAgICAgICBfb2JqLnNlbGVjdEZpbHRlci5vbignY2hhbmdlJywgZnVuY3Rpb24oKXtcblxuICAgICAgICAgICAgICAgICAgICBsZXQgdGhhdCA9ICQodGhpcyk7XG4gICAgICAgICAgICAgICAgICAgIGxldCBmaWx0ZXIgPSB0aGF0LnZhbCgpO1xuICAgICAgICAgICAgICAgICAgICBsZXQgZmlsdGVyR3JvdXAgPSB0aGF0LmF0dHIoJ2RhdGEtZmlsdGVyLWdyb3VwJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCBmaWx0ZXIgIT09ICdhbGwnICl7XG4gICAgICAgICAgICAgICAgICAgICAgICBfb2JqLmZpbHRlckFyclsgZmlsdGVyR3JvdXAgXSA9IGZpbHRlcjtcbiAgICAgICAgICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgX29iai5maWx0ZXJBcnJbIGZpbHRlckdyb3VwIF07XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBfb2JqLm9uQ2hhbmdlRmlsdGVycygpO1xuXG4gICAgICAgICAgICAgICAgfSk7XG5cblxuICAgICAgICAgICAgICAgIC8vIENsaWNrIG9uIGZpbHRlciBsaW5rIG9uIGlzb3RvcGVcbiAgICAgICAgICAgICAgICBfb2JqLmxpbmtGaWx0ZXIub24oICdjbGljaycsIGZ1bmN0aW9uKGV2ZW50KSB7XG5cbiAgICAgICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgbGV0IHRoYXQgPSAkKHRoaXMpO1xuICAgICAgICAgICAgICAgICAgICBsZXQgZmlsdGVyID0gdGhhdC5hdHRyKCdkYXRhLWZpbHRlcicpO1xuICAgICAgICAgICAgICAgICAgICBsZXQgZmlsdGVyR3JvdXAgPSB0aGF0LmF0dHIoJ2RhdGEtZmlsdGVyLWdyb3VwJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgdGhhdC5hZGRDbGFzcyhcImFjdGl2ZVwiKS5wYXJlbnQoJ2xpJykuc2libGluZ3MoKS5maW5kKCdhJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmICggZmlsdGVyICE9PSAnYWxsJyApe1xuICAgICAgICAgICAgICAgICAgICAgICAgX29iai5maWx0ZXJBcnJbIGZpbHRlckdyb3VwIF0gPSBmaWx0ZXI7XG4gICAgICAgICAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIF9vYmouZmlsdGVyQXJyWyBmaWx0ZXJHcm91cCBdO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgX29iai5vbkNoYW5nZUZpbHRlcnMoKTtcblxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB9KTtcblxuXG4gICAgICAgICAgICAvLyBJZiBoYXNoIGhhcyBiZWVuIHByb3ZpZGVkLCBzZXQgZmlsdGVyXG4gICAgICAgICAgICBpZih3aW5kb3cubG9jYXRpb24uaGFzaCAhPT0gJycpe1xuICAgICAgICAgICAgICAgIF9vYmoudXBkYXRlTGlzdCgpO1xuICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgICAgIC8vIE9uIGhhc2ggY2hhbmdlLCBjaGFuZ2UgZmlsdGVycyAoZGlzYWJsZSBmb3JtLmpzIGV2ZW50IGZpcnN0IGFzIGl0IGNvbmZsaWN0cyB3aXRoICMpXG4gICAgICAgICAgICAkKHdpbmRvdykub2ZmKCdoYXNoY2hhbmdlLmZvcm0tZnJhZ21lbnQnKS5vbignaGFzaGNoYW5nZScsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIF9vYmoudXBkYXRlTGlzdCgpO1xuICAgICAgICAgICAgfSk7XG5cblxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBNYXRjaCBoZWlnaHRzIEdyaWQgbGF5b3V0XG4gICAgICAgIC8qXG4gICAgICAgIGlmKCFEcnVwYWwuYmVoYXZpb3JzLnJlc2l6ZXIuaXNNb2JpbGUpe1xuICAgICAgICAgICAgJCgnLm5vZGUtdmlldy1ncmlkLmlzby1pdGVtIC5jb3B5JykubWF0Y2hIZWlnaHQoe2J5Um93OiBmYWxzZX0pO1xuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICQoJy5ub2RlLXZpZXctZ3JpZC5pc28taXRlbSAuY29weScpLm1hdGNoSGVpZ2h0KCdyZW1vdmUnKTtcbiAgICAgICAgfVxuICAgICAgICAqL1xuXG4gICAgfTtcblxuXG5cblxuXG5cbiAgICBEcnVwYWwuYmVoYXZpb3JzLmxpc3Rpbmcub25DaGFuZ2VGaWx0ZXJzID0gZnVuY3Rpb24oKXtcblxuICAgICAgICBsZXQgX29iaiA9IERydXBhbC5iZWhhdmlvcnMubGlzdGluZztcblxuICAgICAgICAvLyBTZXQgSGFzaCB0aGF0IHdpbGwgdHJpZ2dlciB1cGRhdGVMaXN0IG1ldGhvZFxuICAgICAgICB3aW5kb3cubG9jYXRpb24uaGFzaCA9IF9vYmouY3JlYXRlSGFzaEZpbHRlcnMoIF9vYmouZmlsdGVyQXJyICk7XG5cbiAgICAgICAgLy9EcnVwYWwuYXR0YWNoQmVoYXZpb3JzKCk7XG5cbiAgICB9O1xuXG5cblxuICAgIC8vIEZpbHRlciBsaXN0IGJhc2VkIG9uIGZpbHRlciB2YWx1ZVxuICAgIERydXBhbC5iZWhhdmlvcnMubGlzdGluZy5maWx0ZXJMaXN0ID0gZnVuY3Rpb24oKXtcblxuICAgICAgICBsZXQgX29iaiA9IERydXBhbC5iZWhhdmlvcnMubGlzdGluZztcbiAgICAgICAgbGV0IGZpbHRlclZhbHVlID0gX29iai5jb25jYXRWYWx1ZXMoIF9vYmouZmlsdGVyQXJyICk7XG5cbiAgICAgICAgLy8gVXBkYXRlIElzb3RvcGVcbiAgICAgICAgX29iai5pc290b3BlLmlzb3RvcGUoeyBmaWx0ZXI6IGZpbHRlclZhbHVlIH0pXG4gICAgICAgICAgICAub24oJ2xheW91dENvbXBsZXRlJywgZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAvL0RydXBhbC5ibGF6eS5pbml0LnJldmFsaWRhdGUoKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIC8vIE5vIHJlc3VsdHNcbiAgICAgICAgaWYgKCAhX29iai5pc290b3BlLmRhdGEoJ2lzb3RvcGUnKS5maWx0ZXJlZEl0ZW1zLmxlbmd0aCApIHtcbiAgICAgICAgICAgICQoJy5pc29HcmlkIC5uby1yZXN1bHRzJykuZmFkZUluKCk7XG4gICAgICAgIH1lbHNle1xuICAgICAgICAgICAgJCgnLmlzb0dyaWQgLm5vLXJlc3VsdHMnKS5oaWRlKCk7XG4gICAgICAgIH1cblxuICAgIH07XG5cblxuXG4gICAgLy8gVXBkYXRlIGFjdGl2ZSBsaW5rIGFuZCBzZWxlY3QgZnJvbSBoYXNoXG4gICAgRHJ1cGFsLmJlaGF2aW9ycy5saXN0aW5nLnVwZGF0ZUxpc3QgPSBmdW5jdGlvbigpe1xuXG4gICAgICAgIGlmKHdpbmRvdy5sb2NhdGlvbi5oYXNoICE9PSAnIy9hbGwnKSB7XG5cbiAgICAgICAgICAgIGxldCBoYXNoQXJyID0gd2luZG93LmxvY2F0aW9uLmhhc2guc3Vic3RyKDIpLnNwbGl0KFwiJlwiKTtcblxuICAgICAgICAgICAgT2JqZWN0LmtleXMoaGFzaEFycikuZm9yRWFjaChmdW5jdGlvbiAocHJvcCkge1xuICAgICAgICAgICAgICAgIGxldCBhcmdBcnIgPSBoYXNoQXJyW3Byb3BdLnNwbGl0KFwiPVwiKTtcbiAgICAgICAgICAgICAgICBsZXQgZ3JvdXAgPSBhcmdBcnJbMF07XG4gICAgICAgICAgICAgICAgbGV0IHRlcm0gPSBhcmdBcnJbMV07XG5cbiAgICAgICAgICAgICAgICBsZXQgZmlsdGVySXRlbSA9ICQoJy5saW5rLWZpbHRlcltkYXRhLWZpbHRlci1ncm91cD1cIicgKyBncm91cCArICdcIl1bZGF0YS1maWx0ZXI9XCInICsgdGVybSArICdcIl0nKTtcbiAgICAgICAgICAgICAgICBsZXQgZmlsdGVyU2VsZWN0ID0gJCgnLmZpbHRlci1pc290b3BlIC5maWx0ZXItbGlzdFtkYXRhLWZpbHRlci1ncm91cD1cIicgKyBncm91cCArICdcIl0nKTtcblxuICAgICAgICAgICAgICAgIGlmKCBmaWx0ZXJJdGVtLmxlbmd0aCA+IDAgKXtcbiAgICAgICAgICAgICAgICAgICAgZmlsdGVySXRlbS5jbGljaygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiggZmlsdGVyU2VsZWN0Lmxlbmd0aCA+IDAgKSB7XG4gICAgICAgICAgICAgICAgICAgIGZpbHRlclNlbGVjdC52YWwodGVybSkuY2hhbmdlKCkuYmx1cigpLmRyb3Bkb3duKFwidXBkYXRlXCIpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1lbHNlIHtcblxuICAgICAgICAgICAgbGV0IGl0ZW1Db250YWluZXJzID0gJCgnLmZpbHRlci1pc290b3BlIHVsJyk7XG4gICAgICAgICAgICBsZXQgc2VsZWN0Q29udGFpbmVycyA9ICQoJy5maWx0ZXItaXNvdG9wZSBzZWxlY3QuZmlsdGVyLWxpc3QnKTtcblxuICAgICAgICAgICAgaWYgKGl0ZW1Db250YWluZXJzLmxlbmd0aCA+IDApe1xuICAgICAgICAgICAgICAgIGl0ZW1Db250YWluZXJzLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBsZXQgZmlsdGVySXRlbSA9ICQodGhpcykuZmluZCgnLmxpbmstZmlsdGVyW2RhdGEtZmlsdGVyPVwiYWxsXCJdJyk7XG4gICAgICAgICAgICAgICAgICAgIGZpbHRlckl0ZW0uY2xpY2soKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHNlbGVjdENvbnRhaW5lcnMubGVuZ3RoID4gMCl7XG4gICAgICAgICAgICAgICAgc2VsZWN0Q29udGFpbmVycy5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS52YWwoJ2FsbCcpLmNoYW5nZSgpLmJsdXIoKS5kcm9wZG93bihcInVwZGF0ZVwiKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuXG4gICAgICAgIH1cblxuICAgICAgICAvLyBGaWx0ZXIgdGhlIGxpc3Qgd2l0aCBJc290b3BlXG4gICAgICAgIERydXBhbC5iZWhhdmlvcnMubGlzdGluZy5maWx0ZXJMaXN0KCk7XG5cbiAgICB9O1xuXG5cblxuICAgIERydXBhbC5iZWhhdmlvcnMubGlzdGluZy5jb25jYXRWYWx1ZXMgPSBmdW5jdGlvbiggb2JqICl7XG4gICAgICAgIGxldCByZXN1bHQgPSAnJztcbiAgICAgICAgT2JqZWN0LmtleXMob2JqKS5mb3JFYWNoKGZ1bmN0aW9uKHByb3ApIHtcbiAgICAgICAgICAgIHJlc3VsdCArPSBvYmpbIHByb3AgXTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfTtcblxuXG4gICAgRHJ1cGFsLmJlaGF2aW9ycy5saXN0aW5nLmNyZWF0ZUhhc2hGaWx0ZXJzID0gZnVuY3Rpb24oIG9iaiApe1xuXG4gICAgICAgIGxldCByZXN1bHQgPSAnIy8nO1xuICAgICAgICBsZXQgc2l6ZSA9IE9iamVjdC5rZXlzKG9iaikubGVuZ3RoO1xuXG4gICAgICAgIGlmIChzaXplICE9PSAwKXtcbiAgICAgICAgICAgIHJlc3VsdCArPSAkLnBhcmFtKCBvYmogKTtcbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICByZXN1bHQgKz0gJ2FsbCc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuXG4gICAgfTtcblxuXG5cblxufShqUXVlcnksIERydXBhbCkpO1xuIl19
