"use strict";!function(s,e){e.behaviors.listing={},e.behaviors.listing.filterArr={},e.behaviors.listing.isotope="",e.behaviors.listing.isoContainer=s(".isotope"),e.behaviors.listing.isoGrid=e.behaviors.listing.isoContainer.find(".isoGrid"),e.behaviors.listing.linkFilter=e.behaviors.listing.isoContainer.find(".link-filter"),e.behaviors.listing.selectFilter=e.behaviors.listing.isoContainer.find(".filter-isotope select"),e.behaviors.listing.attach=function(i){var o=e.behaviors.listing;s(".listing.isotope",i).once("listing").each(function(){o.isoContainer.each(function(){o.isoGrid.append('<div class="iso-gutter"></div>'),o.isotope=o.isoGrid.isotope({masonry:{columnWidth:".iso-item",gutter:".iso-gutter"},itemSelector:".iso-item",percentPosition:!0}),o.isotope.imagesLoaded(e.behaviors.listing.isotope,function(){o.isotope.isotope("layout")}),o.selectFilter.on("change",function(){var i=s(this),t=i.val(),i=i.attr("data-filter-group");"all"!==t?o.filterArr[i]=t:delete o.filterArr[i],o.onChangeFilters()}),o.linkFilter.on("click",function(i){i.preventDefault(),i.stopPropagation();var t=s(this),e=t.attr("data-filter"),i=t.attr("data-filter-group");t.addClass("active").parent("li").siblings().find("a").removeClass("active"),"all"!==e?o.filterArr[i]=e:delete o.filterArr[i],o.onChangeFilters()})}),""!==window.location.hash&&o.updateList(),s(window).off("hashchange.form-fragment").on("hashchange",function(){o.updateList()})})},e.behaviors.listing.onChangeFilters=function(){var i=e.behaviors.listing;window.location.hash=i.createHashFilters(i.filterArr)},e.behaviors.listing.filterList=function(){var i=e.behaviors.listing,t=i.concatValues(i.filterArr);i.isotope.isotope({filter:t}).on("layoutComplete",function(){}),i.isotope.data("isotope").filteredItems.length?s(".isoGrid .no-results").hide():s(".isoGrid .no-results").fadeIn()},e.behaviors.listing.updateList=function(){var o,i,t;"#/all"!==window.location.hash?(o=window.location.hash.substr(2).split("&"),Object.keys(o).forEach(function(i){var t=o[i].split("="),e=t[0],i=t[1],t=s('.link-filter[data-filter-group="'+e+'"][data-filter="'+i+'"]'),e=s('.filter-isotope .filter-list[data-filter-group="'+e+'"]');0<t.length&&t.click(),0<e.length&&e.val(i).change().blur().dropdown("update")})):(i=s(".filter-isotope ul"),t=s(".filter-isotope select.filter-list"),0<i.length&&i.each(function(){s(this).find('.link-filter[data-filter="all"]').click()}),0<t.length&&t.each(function(){s(this).val("all").change().blur().dropdown("update")})),e.behaviors.listing.filterList()},e.behaviors.listing.concatValues=function(t){var e="";return Object.keys(t).forEach(function(i){e+=t[i]}),e},e.behaviors.listing.createHashFilters=function(i){var t="#/";return t+=0!==Object.keys(i).length?s.param(i):"all"}}(jQuery,Drupal);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImlzb3RvcGUuanMiXSwibmFtZXMiOlsiJCIsIkRydXBhbCIsImJlaGF2aW9ycyIsImxpc3RpbmciLCJmaWx0ZXJBcnIiLCJpc29Db250YWluZXIiLCJpc290b3BlIiwiZmluZCIsImxpbmtGaWx0ZXIiLCJhdHRhY2giLCJjb250ZXh0IiwiX29iaiIsIm9uY2UiLCJlYWNoIiwiaXNvR3JpZCIsImFwcGVuZCIsIm1hc29ucnkiLCJjb2x1bW5XaWR0aCIsImd1dHRlciIsInBlcmNlbnRQb3NpdGlvbiIsImltYWdlc0xvYWRlZCIsImZpbHRlciIsInNlbGVjdEZpbHRlciIsIm9uIiwidGhhdCIsInRoaXMiLCJ2YWwiLCJmaWx0ZXJHcm91cCIsIm9uQ2hhbmdlRmlsdGVycyIsImF0dHIiLCJldmVudCIsInByZXZlbnREZWZhdWx0Iiwic3RvcFByb3BhZ2F0aW9uIiwicGFyZW50Iiwic2libGluZ3MiLCJyZW1vdmVDbGFzcyIsIndpbmRvdyIsImxvY2F0aW9uIiwiaGFzaCIsInVwZGF0ZUxpc3QiLCJvZmYiLCJjcmVhdGVIYXNoRmlsdGVycyIsImZpbHRlclNlbGVjdCIsImZpbHRlckxpc3QiLCJmaWx0ZXJJdGVtIiwibGVuZ3RoIiwiY29uY2F0VmFsdWVzIiwiZmlsdGVyVmFsdWUiLCJjaGFuZ2UiLCJzZWxlY3RDb250YWluZXJzIiwiZGF0YSIsImZpbHRlcmVkSXRlbXMiLCJpdGVtQ29udGFpbmVycyIsImhpZGUiLCJmYWRlSW4iLCJoYXNoQXJyIiwic3Vic3RyIiwic3BsaXQiLCJwcm9wIiwiYXJnQXJyIiwiZ3JvdXAiLCJ0ZXJtIiwiY2xpY2siLCJibHVyIiwiZHJvcGRvd24iLCJyZXN1bHQiLCJvYmoiLCJPYmplY3QiLCJrZXlzIiwiZm9yRWFjaCIsInBhcmFtIiwialF1ZXJ5Il0sIm1hcHBpbmdzIjoiY0FBQyxTQUF1QkEsRUFBR0MsR0FJdkJBLEVBQU9DLFVBQVVDLFFBQVUsR0FBM0JGLEVBQU9DLFVBQVVDLFFBQVVDLFVBQTNCLEdBQ0FILEVBQU9DLFVB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UUFMSkQsRUFBQWtCLFFBU3lCckIsRUFBUnRDLEVBQVFzQyxRQUVSQyxFQUFiaEIsSUFBQW1DLEdBQUFiLFNBQUFlLE9BQUFDLFNBQUEsY0FNY1osRUFBVnBELEVBQUEsc0JBQ0hpRCxFQUFBakQsRUFBQSxzQ0FFRCxFQUFPaUUsRUFBUHBCLFFBWEpPLEVBQUF2QyxLQUFBLFdBaE5KYixFQUFBeUIsTUFBQWxCLEtBQUEsbUNBbUwrQnVELFVBSVcsRUFBMUJiLEVBQWlCSixRQUNqQkksRUFBaUJwQyxLQUFLLFdBQ2xCYixFQUFFeUIsTUFBTUMsSUFBSSxPQUFPc0IsU0FBU2UsT0FBT0MsU0FBUyxhQVF4RC9ELEVBQU9DLFVBQVVDLFFBQVF3QyxjQU03QjFDLEVBQU9DLFVBQVVDLFFBQVEyQyxhQUFlLFNBQVVvQixHQUM5QyxJQUFJRCxFQUFTLEdBSWIsT0FIQUUsT0FBT0MsS0FBS0YsR0FBS0csUUFBUSxTQUFTWCxHQUM5Qk8sR0FBVUMsRUFBS1IsS0FFWk8sR0FJWGhFLEVBQU9DLFVBQVVDLFFBQVFzQyxrQkFBb0IsU0FBVXlCLEdBRW5ELElBQUlELEVBQVMsS0FTYixPQUxJQSxHQURTLElBRkZFLE9BQU9DLEtBQUtGLEdBQUtyQixPQUdkN0MsRUFBRXNFLE1BQU9KLEdBRVQsT0F4TnJCLENBa09DSyxPQUFRdEUiLCJmaWxlIjoiaXNvdG9wZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBsaXN0aW5nU2NyaXB0KCQsIERydXBhbCkge1xyXG5cclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBEcnVwYWwuYmVoYXZpb3JzLmxpc3RpbmcgPSB7fTtcclxuICAgIERydXBhbC5iZWhhdmlvcnMubGlzdGluZy5maWx0ZXJBcnIgPSB7fTsgLy8gT2JqZWN0LyBhcnJheSBXaGVyZSB3ZSBzdG9yZSBmaWx0ZXJzIGFuZCB0aGVpciBncm91cFxyXG4gICAgRHJ1cGFsLmJlaGF2aW9ycy5saXN0aW5nLmlzb3RvcGUgPSAnJzsgLy8gSXNvdG9wZSBlbGVtZW50IGNyZWF0ZWQgYnkgbGlicmFyeVxyXG4gICAgRHJ1cGFsLmJlaGF2aW9ycy5saXN0aW5nLmlzb0NvbnRhaW5lciA9ICQoXCIuaXNvdG9wZVwiKTtcclxuICAgIERydXBhbC5iZWhhdmlvcnMubGlzdGluZy5pc29HcmlkID0gRHJ1cGFsLmJlaGF2aW9ycy5saXN0aW5nLmlzb0NvbnRhaW5lci5maW5kKFwiLmlzb0dyaWRcIik7XHJcbiAgICBEcnVwYWwuYmVoYXZpb3JzLmxpc3RpbmcubGlua0ZpbHRlciA9IERydXBhbC5iZWhhdmlvcnMubGlzdGluZy5pc29Db250YWluZXIuZmluZChcIi5saW5rLWZpbHRlclwiKTsgLy8gV2hlbiBmaWx0ZXJzIGFyZSBidXR0b24gbGluayBsYWJlbFxyXG4gICAgRHJ1cGFsLmJlaGF2aW9ycy5saXN0aW5nLnNlbGVjdEZpbHRlciA9IERydXBhbC5iZWhhdmlvcnMubGlzdGluZy5pc29Db250YWluZXIuZmluZChcIi5maWx0ZXItaXNvdG9wZSBzZWxlY3RcIik7IC8vIFdoZW4gZmlsdGVycyBhcmUgc2VsZWN0IGRyb3Bkb3duXHJcblxyXG5cclxuICAgIERydXBhbC5iZWhhdmlvcnMubGlzdGluZy5hdHRhY2ggID0gZnVuY3Rpb24gKGNvbnRleHQpIHtcclxuXHJcbiAgICAgICAgbGV0IF9vYmogPSBEcnVwYWwuYmVoYXZpb3JzLmxpc3Rpbmc7XHJcblxyXG4gICAgICAgICQoJy5saXN0aW5nLmlzb3RvcGUnLCBjb250ZXh0KS5vbmNlKCdsaXN0aW5nJykuZWFjaChmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgICAgICBfb2JqLmlzb0NvbnRhaW5lci5lYWNoKGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBBZGRpbmcgZ3V0dGVyIGVsZW1lbnQgaW4gdGhlIGlzbyBncmlkXHJcbiAgICAgICAgICAgICAgICBfb2JqLmlzb0dyaWQuYXBwZW5kKCc8ZGl2IGNsYXNzPVwiaXNvLWd1dHRlclwiPjwvZGl2PicpO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIFNldHRpbmcgdXAgSXNvdG9wZSBsaXN0aW5nXHJcbiAgICAgICAgICAgICAgICBfb2JqLmlzb3RvcGUgPSBfb2JqLmlzb0dyaWQuaXNvdG9wZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgbWFzb25yeToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2x1bW5XaWR0aDogJy5pc28taXRlbScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGd1dHRlcjogJy5pc28tZ3V0dGVyJ1xyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgaXRlbVNlbGVjdG9yOiAnLmlzby1pdGVtJyxcclxuICAgICAgICAgICAgICAgICAgICBwZXJjZW50UG9zaXRpb246IHRydWVcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIExheW91dCBsaXN0IG9uY2UgaW1hZ2VzIGFyZSBsb2FkZWRcclxuICAgICAgICAgICAgICAgIF9vYmouaXNvdG9wZS5pbWFnZXNMb2FkZWQoRHJ1cGFsLmJlaGF2aW9ycy5saXN0aW5nLmlzb3RvcGUsIGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICAgICAgX29iai5pc290b3BlLmlzb3RvcGUoJ2xheW91dCcpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gQ2hhbmdlIGZpbHRlciBzZWxlY3RcclxuICAgICAgICAgICAgICAgIF9vYmouc2VsZWN0RmlsdGVyLm9uKCdjaGFuZ2UnLCBmdW5jdGlvbigpe1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBsZXQgdGhhdCA9ICQodGhpcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGZpbHRlciA9IHRoYXQudmFsKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGZpbHRlckdyb3VwID0gdGhhdC5hdHRyKCdkYXRhLWZpbHRlci1ncm91cCcpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoIGZpbHRlciAhPT0gJ2FsbCcgKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX29iai5maWx0ZXJBcnJbIGZpbHRlckdyb3VwIF0gPSBmaWx0ZXI7XHJcbiAgICAgICAgICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBfb2JqLmZpbHRlckFyclsgZmlsdGVyR3JvdXAgXTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIF9vYmoub25DaGFuZ2VGaWx0ZXJzKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG5cclxuICAgICAgICAgICAgICAgIC8vIENsaWNrIG9uIGZpbHRlciBsaW5rIG9uIGlzb3RvcGVcclxuICAgICAgICAgICAgICAgIF9vYmoubGlua0ZpbHRlci5vbiggJ2NsaWNrJywgZnVuY3Rpb24oZXZlbnQpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHRoYXQgPSAkKHRoaXMpO1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBmaWx0ZXIgPSB0aGF0LmF0dHIoJ2RhdGEtZmlsdGVyJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGZpbHRlckdyb3VwID0gdGhhdC5hdHRyKCdkYXRhLWZpbHRlci1ncm91cCcpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB0aGF0LmFkZENsYXNzKFwiYWN0aXZlXCIpLnBhcmVudCgnbGknKS5zaWJsaW5ncygpLmZpbmQoJ2EnKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICggZmlsdGVyICE9PSAnYWxsJyApe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfb2JqLmZpbHRlckFyclsgZmlsdGVyR3JvdXAgXSA9IGZpbHRlcjtcclxuICAgICAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIF9vYmouZmlsdGVyQXJyWyBmaWx0ZXJHcm91cCBdO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgX29iai5vbkNoYW5nZUZpbHRlcnMoKTtcclxuXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuXHJcbiAgICAgICAgICAgIC8vIElmIGhhc2ggaGFzIGJlZW4gcHJvdmlkZWQsIHNldCBmaWx0ZXJcclxuICAgICAgICAgICAgaWYod2luZG93LmxvY2F0aW9uLmhhc2ggIT09ICcnKXtcclxuICAgICAgICAgICAgICAgIF9vYmoudXBkYXRlTGlzdCgpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICAgICAgLy8gT24gaGFzaCBjaGFuZ2UsIGNoYW5nZSBmaWx0ZXJzIChkaXNhYmxlIGZvcm0uanMgZXZlbnQgZmlyc3QgYXMgaXQgY29uZmxpY3RzIHdpdGggIylcclxuICAgICAgICAgICAgJCh3aW5kb3cpLm9mZignaGFzaGNoYW5nZS5mb3JtLWZyYWdtZW50Jykub24oJ2hhc2hjaGFuZ2UnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIF9vYmoudXBkYXRlTGlzdCgpO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcblxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBNYXRjaCBoZWlnaHRzIEdyaWQgbGF5b3V0XHJcbiAgICAgICAgLypcclxuICAgICAgICBpZighRHJ1cGFsLmJlaGF2aW9ycy5yZXNpemVyLmlzTW9iaWxlKXtcclxuICAgICAgICAgICAgJCgnLm5vZGUtdmlldy1ncmlkLmlzby1pdGVtIC5jb3B5JykubWF0Y2hIZWlnaHQoe2J5Um93OiBmYWxzZX0pO1xyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAkKCcubm9kZS12aWV3LWdyaWQuaXNvLWl0ZW0gLmNvcHknKS5tYXRjaEhlaWdodCgncmVtb3ZlJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgICovXHJcblxyXG4gICAgfTtcclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuICAgIERydXBhbC5iZWhhdmlvcnMubGlzdGluZy5vbkNoYW5nZUZpbHRlcnMgPSBmdW5jdGlvbigpe1xyXG5cclxuICAgICAgICBsZXQgX29iaiA9IERydXBhbC5iZWhhdmlvcnMubGlzdGluZztcclxuXHJcbiAgICAgICAgLy8gU2V0IEhhc2ggdGhhdCB3aWxsIHRyaWdnZXIgdXBkYXRlTGlzdCBtZXRob2RcclxuICAgICAgICB3aW5kb3cubG9jYXRpb24uaGFzaCA9IF9vYmouY3JlYXRlSGFzaEZpbHRlcnMoIF9vYmouZmlsdGVyQXJyICk7XHJcblxyXG4gICAgICAgIC8vRHJ1cGFsLmF0dGFjaEJlaGF2aW9ycygpO1xyXG5cclxuICAgIH07XHJcblxyXG5cclxuXHJcbiAgICAvLyBGaWx0ZXIgbGlzdCBiYXNlZCBvbiBmaWx0ZXIgdmFsdWVcclxuICAgIERydXBhbC5iZWhhdmlvcnMubGlzdGluZy5maWx0ZXJMaXN0ID0gZnVuY3Rpb24oKXtcclxuXHJcbiAgICAgICAgbGV0IF9vYmogPSBEcnVwYWwuYmVoYXZpb3JzLmxpc3Rpbmc7XHJcbiAgICAgICAgbGV0IGZpbHRlclZhbHVlID0gX29iai5jb25jYXRWYWx1ZXMoIF9vYmouZmlsdGVyQXJyICk7XHJcblxyXG4gICAgICAgIC8vIFVwZGF0ZSBJc290b3BlXHJcbiAgICAgICAgX29iai5pc290b3BlLmlzb3RvcGUoeyBmaWx0ZXI6IGZpbHRlclZhbHVlIH0pXHJcbiAgICAgICAgICAgIC5vbignbGF5b3V0Q29tcGxldGUnLCBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgLy9EcnVwYWwuYmxhenkuaW5pdC5yZXZhbGlkYXRlKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBObyByZXN1bHRzXHJcbiAgICAgICAgaWYgKCAhX29iai5pc290b3BlLmRhdGEoJ2lzb3RvcGUnKS5maWx0ZXJlZEl0ZW1zLmxlbmd0aCApIHtcclxuICAgICAgICAgICAgJCgnLmlzb0dyaWQgLm5vLXJlc3VsdHMnKS5mYWRlSW4oKTtcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgJCgnLmlzb0dyaWQgLm5vLXJlc3VsdHMnKS5oaWRlKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH07XHJcblxyXG5cclxuXHJcbiAgICAvLyBVcGRhdGUgYWN0aXZlIGxpbmsgYW5kIHNlbGVjdCBmcm9tIGhhc2hcclxuICAgIERydXBhbC5iZWhhdmlvcnMubGlzdGluZy51cGRhdGVMaXN0ID0gZnVuY3Rpb24oKXtcclxuXHJcbiAgICAgICAgaWYod2luZG93LmxvY2F0aW9uLmhhc2ggIT09ICcjL2FsbCcpIHtcclxuXHJcbiAgICAgICAgICAgIGxldCBoYXNoQXJyID0gd2luZG93LmxvY2F0aW9uLmhhc2guc3Vic3RyKDIpLnNwbGl0KFwiJlwiKTtcclxuXHJcbiAgICAgICAgICAgIE9iamVjdC5rZXlzKGhhc2hBcnIpLmZvckVhY2goZnVuY3Rpb24gKHByb3ApIHtcclxuICAgICAgICAgICAgICAgIGxldCBhcmdBcnIgPSBoYXNoQXJyW3Byb3BdLnNwbGl0KFwiPVwiKTtcclxuICAgICAgICAgICAgICAgIGxldCBncm91cCA9IGFyZ0FyclswXTtcclxuICAgICAgICAgICAgICAgIGxldCB0ZXJtID0gYXJnQXJyWzFdO1xyXG5cclxuICAgICAgICAgICAgICAgIGxldCBmaWx0ZXJJdGVtID0gJCgnLmxpbmstZmlsdGVyW2RhdGEtZmlsdGVyLWdyb3VwPVwiJyArIGdyb3VwICsgJ1wiXVtkYXRhLWZpbHRlcj1cIicgKyB0ZXJtICsgJ1wiXScpO1xyXG4gICAgICAgICAgICAgICAgbGV0IGZpbHRlclNlbGVjdCA9ICQoJy5maWx0ZXItaXNvdG9wZSAuZmlsdGVyLWxpc3RbZGF0YS1maWx0ZXItZ3JvdXA9XCInICsgZ3JvdXAgKyAnXCJdJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYoIGZpbHRlckl0ZW0ubGVuZ3RoID4gMCApe1xyXG4gICAgICAgICAgICAgICAgICAgIGZpbHRlckl0ZW0uY2xpY2soKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmKCBmaWx0ZXJTZWxlY3QubGVuZ3RoID4gMCApIHtcclxuICAgICAgICAgICAgICAgICAgICBmaWx0ZXJTZWxlY3QudmFsKHRlcm0pLmNoYW5nZSgpLmJsdXIoKS5kcm9wZG93bihcInVwZGF0ZVwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1lbHNlIHtcclxuXHJcbiAgICAgICAgICAgIGxldCBpdGVtQ29udGFpbmVycyA9ICQoJy5maWx0ZXItaXNvdG9wZSB1bCcpO1xyXG4gICAgICAgICAgICBsZXQgc2VsZWN0Q29udGFpbmVycyA9ICQoJy5maWx0ZXItaXNvdG9wZSBzZWxlY3QuZmlsdGVyLWxpc3QnKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChpdGVtQ29udGFpbmVycy5sZW5ndGggPiAwKXtcclxuICAgICAgICAgICAgICAgIGl0ZW1Db250YWluZXJzLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBmaWx0ZXJJdGVtID0gJCh0aGlzKS5maW5kKCcubGluay1maWx0ZXJbZGF0YS1maWx0ZXI9XCJhbGxcIl0nKTtcclxuICAgICAgICAgICAgICAgICAgICBmaWx0ZXJJdGVtLmNsaWNrKCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHNlbGVjdENvbnRhaW5lcnMubGVuZ3RoID4gMCl7XHJcbiAgICAgICAgICAgICAgICBzZWxlY3RDb250YWluZXJzLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICQodGhpcykudmFsKCdhbGwnKS5jaGFuZ2UoKS5ibHVyKCkuZHJvcGRvd24oXCJ1cGRhdGVcIik7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBGaWx0ZXIgdGhlIGxpc3Qgd2l0aCBJc290b3BlXHJcbiAgICAgICAgRHJ1cGFsLmJlaGF2aW9ycy5saXN0aW5nLmZpbHRlckxpc3QoKTtcclxuXHJcbiAgICB9O1xyXG5cclxuXHJcblxyXG4gICAgRHJ1cGFsLmJlaGF2aW9ycy5saXN0aW5nLmNvbmNhdFZhbHVlcyA9IGZ1bmN0aW9uKCBvYmogKXtcclxuICAgICAgICBsZXQgcmVzdWx0ID0gJyc7XHJcbiAgICAgICAgT2JqZWN0LmtleXMob2JqKS5mb3JFYWNoKGZ1bmN0aW9uKHByb3ApIHtcclxuICAgICAgICAgICAgcmVzdWx0ICs9IG9ialsgcHJvcCBdO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9O1xyXG5cclxuXHJcbiAgICBEcnVwYWwuYmVoYXZpb3JzLmxpc3RpbmcuY3JlYXRlSGFzaEZpbHRlcnMgPSBmdW5jdGlvbiggb2JqICl7XHJcblxyXG4gICAgICAgIGxldCByZXN1bHQgPSAnIy8nO1xyXG4gICAgICAgIGxldCBzaXplID0gT2JqZWN0LmtleXMob2JqKS5sZW5ndGg7XHJcblxyXG4gICAgICAgIGlmIChzaXplICE9PSAwKXtcclxuICAgICAgICAgICAgcmVzdWx0ICs9ICQucGFyYW0oIG9iaiApO1xyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICByZXN1bHQgKz0gJ2FsbCc7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG5cclxuICAgIH07XHJcblxyXG5cclxuXHJcblxyXG59KGpRdWVyeSwgRHJ1cGFsKSk7XHJcbiJdfQ==
